import{l as e,S as t,i as r,s,e as a,t as l,c as i,a as n,b as o,d as c,f as h,g as f,h as u,j as d,k as m,m as p,n as g,o as v,p as b,q as E,r as w,u as M,v as T,w as D,x as $,y,z as F,A as I,H as A,B as V,C as k}from"./client.f818c36f.js";import{d as S,P as j}from"./PictoAge.9ee8c568.js";import"./dayjs_custom_locale_fr.87ddbadb.js";import{M as P}from"./MainTitle.77fb58fd.js";import{f as q}from"./format.264f401c.js";var U=function(e){e.preventDefault();const t=e.currentTarget,r=new URL(t.href).hash.replace("#",""),s=document.getElementById(r);window.scrollTo({top:s.offsetTop,behavior:"smooth"}),history.pushState({top:s.offsetTop},null,`#${r}`)};const{window:H}=I;function L(e,t,r){const s=e.slice();return s[4]=t[r],s}function Y(e,t,r){const s=e.slice();return s[7]=t[r],s}function x(e,t,r){const s=e.slice();return s[1]=t[r],s}function C(e,t,r){const s=e.slice();return s[4]=t[r],s}function B(e){let t,r,s,g,v,b,E=e[4].section+"";return{c(){t=a("a"),r=a("span"),s=l(E),this.h()},l(e){t=i(e,"A",{href:!0});var a=n(t);r=i(a,"SPAN",{});var l=n(r);s=o(l,E),l.forEach(c),a.forEach(c),this.h()},h(){h(t,"href",g="#"+e[4].slug),f(t,"archived",0===e[4].countPublished)},m(e,a){u(e,t,a),d(t,r),d(r,s),v||(b=m(t,"click",U),v=!0)},p(e,r){1&r&&E!==(E=e[4].section+"")&&p(s,E),1&r&&g!==(g="#"+e[4].slug)&&h(t,"href",g),1&r&&f(t,"archived",0===e[4].countPublished)},d(e){e&&c(t),v=!1,b()}}}function N(e){let t,r,s,f,m,E,w,M=1===e[1].length?"Le film":"Les films",T=S(e[1][0].datePublished).format("dddd D MMMM")+"",D=e[1],$=[];for(let t=0;t<D.length;t+=1)$[t]=R(x(e,D,t));return{c(){t=a("div"),r=a("div"),s=a("h2"),f=l(M),m=l("\r\n            du\r\n            "),E=l(T),w=g();for(let e=0;e<$.length;e+=1)$[e].c();this.h()},l(e){t=i(e,"DIV",{class:!0});var a=n(t);r=i(a,"DIV",{class:!0});var l=n(r);s=i(l,"H2",{});var h=n(s);f=o(h,M),m=o(h,"\r\n            du\r\n            "),E=o(h,T),h.forEach(c),l.forEach(c),w=v(a);for(let e=0;e<$.length;e+=1)$[e].l(a);a.forEach(c),this.h()},h(){h(r,"class","pick-label"),h(t,"class","pick-container")},m(e,a){u(e,t,a),d(t,r),d(r,s),d(s,f),d(s,m),d(s,E),d(t,w);for(let e=0;e<$.length;e+=1)$[e].m(t,null)},p(e,r){if(2&r&&M!==(M=1===e[1].length?"Le film":"Les films")&&p(f,M),2&r&&T!==(T=S(e[1][0].datePublished).format("dddd D MMMM")+"")&&p(E,T),2&r){let s;for(D=e[1],s=0;s<D.length;s+=1){const a=x(e,D,s);$[s]?$[s].p(a,r):($[s]=R(a),$[s].c(),$[s].m(t,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=D.length}},d(e){e&&c(t),b($,e)}}}function R(t){let r,s,f,m,b,E,w,M,T,D,$,y,F,I,V,k,S,j,P,U,H,L,Y,x,C,B,N,R,z,_,G,J,O,K=q.artTitre(t[1].artFr,t[1].titreFr)+"",Q=q.beforeAfterStr("<div class='sous-titre-fr'>","</div>",t[1].sousTitreFr)+"",W=t[1].duree+"",X=t[1].realisateurs+"",Z=t[1].annee+"",ee=q.beforeAfterStr("<div>","</div>",t[1].adaptation)+"",te=q.beforeAfterStr("<div>Avec ",".</div>",t[1].interpretation)+"",re=q.beforeAfterStr("<div>","</div>",t[1].shortSynopsis||t[1].synopsis)+"";return{c(){r=a("div"),s=a("div"),f=a("a"),m=a("img"),w=g(),M=a("div"),T=a("div"),$=g(),F=g(),I=a("div"),V=l(W),S=g(),j=a("div"),P=a("div"),U=l(X),H=l(", "),L=l(Z),Y=g(),C=g(),N=g(),z=g(),_=a("a"),G=l("Voir le film"),O=g(),this.h()},l(e){r=i(e,"DIV",{class:!0});var t=n(r);s=i(t,"DIV",{class:!0});var a=n(s);f=i(a,"A",{rel:!0,href:!0,class:!0});var l=n(f);m=i(l,"IMG",{src:!0,alt:!0}),w=v(l),M=i(l,"DIV",{class:!0});var h=n(M);T=i(h,"DIV",{});var u=n(T);$=v(u),u.forEach(c),h.forEach(c),F=v(l),I=i(l,"DIV",{class:!0});var d=n(I);V=o(d,W),d.forEach(c),l.forEach(c),a.forEach(c),S=v(t),j=i(t,"DIV",{class:!0});var p=n(j);P=i(p,"DIV",{});var g=n(P);U=o(g,X),H=o(g,", "),L=o(g,Z),g.forEach(c),Y=v(p),C=v(p),N=v(p),z=v(p),_=i(p,"A",{class:!0,rel:!0,href:!0});var b=n(_);G=o(b,"Voir le film"),b.forEach(c),p.forEach(c),O=v(t),t.forEach(c),this.h()},h(){m.src!==(b=e.isUndefined(t[1].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${t[1].pk}-1.jpg`:`${t[1].thumb}`)&&h(m,"src",b),h(m,"alt",E=q.artTitre(t[1].artFr,t[1].titreFr)),D=new A($),y=new A(null),h(M,"class","pick-title-container"),h(I,"class","duree"),h(f,"rel","prefetch"),h(f,"href",k="film/"+t[1].slug+"/"),h(f,"class","pick-img"),h(s,"class","pick-img-container"),x=new A(C),B=new A(N),R=new A(z),h(_,"class","more"),h(_,"rel","prefetch"),h(_,"href",J="film/"+t[1].slug+"/"),h(j,"class","pick-film-info"),h(r,"class","pick")},m(e,t){u(e,r,t),d(r,s),d(s,f),d(f,m),d(f,w),d(f,M),d(M,T),D.m(K,T),d(T,$),y.m(Q,T),d(f,F),d(f,I),d(I,V),d(r,S),d(r,j),d(j,P),d(P,U),d(P,H),d(P,L),d(j,Y),x.m(ee,j),d(j,C),B.m(te,j),d(j,N),R.m(re,j),d(j,z),d(j,_),d(_,G),d(r,O)},p(t,r){2&r&&m.src!==(b=e.isUndefined(t[1].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${t[1].pk}-1.jpg`:`${t[1].thumb}`)&&h(m,"src",b),2&r&&E!==(E=q.artTitre(t[1].artFr,t[1].titreFr))&&h(m,"alt",E),2&r&&K!==(K=q.artTitre(t[1].artFr,t[1].titreFr)+"")&&D.p(K),2&r&&Q!==(Q=q.beforeAfterStr("<div class='sous-titre-fr'>","</div>",t[1].sousTitreFr)+"")&&y.p(Q),2&r&&W!==(W=t[1].duree+"")&&p(V,W),2&r&&k!==(k="film/"+t[1].slug+"/")&&h(f,"href",k),2&r&&X!==(X=t[1].realisateurs+"")&&p(U,X),2&r&&Z!==(Z=t[1].annee+"")&&p(L,Z),2&r&&ee!==(ee=q.beforeAfterStr("<div>","</div>",t[1].adaptation)+"")&&x.p(ee),2&r&&te!==(te=q.beforeAfterStr("<div>Avec ",".</div>",t[1].interpretation)+"")&&B.p(te),2&r&&re!==(re=q.beforeAfterStr("<div>","</div>",t[1].shortSynopsis||t[1].synopsis)+"")&&R.p(re),2&r&&J!==(J="film/"+t[1].slug+"/")&&h(_,"href",J)},d(e){e&&c(r)}}}function z(e){let t,r=(e[4].stub||"")+"";return{c(){t=a("div"),this.h()},l(e){t=i(e,"DIV",{class:!0}),n(t).forEach(c),this.h()},h(){h(t,"class","stub"),f(t,"archived",0===e[4].countPublished)},m(e,s){u(e,t,s),t.innerHTML=r},p(e,s){1&s&&r!==(r=(e[4].stub||"")+"")&&(t.innerHTML=r),1&s&&f(t,"archived",0===e[4].countPublished)},d(e){e&&c(t)}}}function _(e){let t,r,s,f=S(e[7].dateUnpublished).format(S().year()<S(e[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"";return{c(){t=a("div"),r=l("Jusqu'au\r\n                    "),s=l(f),this.h()},l(e){t=i(e,"DIV",{class:!0});var a=n(t);r=o(a,"Jusqu'au\r\n                    "),s=o(a,f),a.forEach(c),this.h()},h(){h(t,"class","end")},m(e,a){u(e,t,a),d(t,r),d(t,s)},p(e,t){1&t&&f!==(f=S(e[7].dateUnpublished).format(S().year()<S(e[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"")&&p(s,f)},d(e){e&&c(t)}}}function G(e){let t,r;return{c(){t=a("div"),r=l("Film indisponible"),this.h()},l(e){t=i(e,"DIV",{class:!0});var s=n(t);r=o(s,"Film indisponible"),s.forEach(c),this.h()},h(){h(t,"class","end")},m(e,s){u(e,t,s),d(t,r)},p:k,d(e){e&&c(t)}}}function J(e){let t,r,s,m,b,y,F,I,V,k,S,P,U,H,L,Y,x,C,B,N,R,z,J,O=e[7].duree+"",K=`${q.artTitre(e[7].artFr,e[7].titreFr)}${q.beforeAfterStr("string"==typeof e[7].sousTitreFr?e[7].sousTitreFr[0]===e[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[7].sousTitreFr)}`,Q=e[7].realisateurs+"",W=e[7].annee+"";function X(e,t){return 3===e[7].status?G:e[7].dateUnpublished?_:void 0}L=new j({props:{age:e[7].ageMin,size:"20"}});let Z=X(e),ee=Z&&Z(e);return{c(){t=a("li"),r=a("a"),s=a("div"),m=a("img"),F=g(),I=a("div"),V=l(O),k=g(),S=a("div"),P=a("div"),H=g(),w(L.$$.fragment),Y=g(),x=a("div"),C=l(Q),B=l(", "),N=l(W),R=g(),ee&&ee.c(),this.h()},l(e){t=i(e,"LI",{class:!0});var a=n(t);r=i(a,"A",{rel:!0,href:!0});var l=n(r);s=i(l,"DIV",{class:!0});var h=n(s);m=i(h,"IMG",{loading:!0,src:!0,alt:!0}),F=v(h),I=i(h,"DIV",{class:!0});var f=n(I);V=o(f,O),f.forEach(c),h.forEach(c),k=v(l),S=i(l,"DIV",{class:!0});var u=n(S);P=i(u,"DIV",{class:!0});var d=n(P);H=v(d),M(L.$$.fragment,d),d.forEach(c),Y=v(u),x=i(u,"DIV",{});var p=n(x);C=o(p,Q),B=o(p,", "),N=o(p,W),p.forEach(c),R=v(u),ee&&ee.l(u),u.forEach(c),l.forEach(c),a.forEach(c),this.h()},h(){h(m,"loading","lazy"),m.src!==(b=e[7].thumb)&&h(m,"src",b),h(m,"alt",y=q.artTitre(e[7].artFr,e[7].titreFr)),h(I,"class","duree"),h(s,"class","img-container"),U=new A(H),h(P,"class","titre"),h(S,"class","film-info"),h(r,"rel","prefetch"),h(r,"href",z="film/"+e[7].slug+"/"),h(t,"class","film"),f(t,"ispick",1===e[7].status),f(t,"archived",3===e[7].status)},m(e,a){u(e,t,a),d(t,r),d(r,s),d(s,m),d(s,F),d(s,I),d(I,V),d(r,k),d(r,S),d(S,P),U.m(K,P),d(P,H),T(L,P,null),d(S,Y),d(S,x),d(x,C),d(x,B),d(x,N),d(S,R),ee&&ee.m(S,null),J=!0},p(e,s){(!J||1&s&&m.src!==(b=e[7].thumb))&&h(m,"src",b),(!J||1&s&&y!==(y=q.artTitre(e[7].artFr,e[7].titreFr)))&&h(m,"alt",y),(!J||1&s)&&O!==(O=e[7].duree+"")&&p(V,O),(!J||1&s)&&K!==(K=`${q.artTitre(e[7].artFr,e[7].titreFr)}${q.beforeAfterStr("string"==typeof e[7].sousTitreFr?e[7].sousTitreFr[0]===e[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[7].sousTitreFr)}`)&&U.p(K);const a={};1&s&&(a.age=e[7].ageMin),L.$set(a),(!J||1&s)&&Q!==(Q=e[7].realisateurs+"")&&p(C,Q),(!J||1&s)&&W!==(W=e[7].annee+"")&&p(N,W),Z===(Z=X(e))&&ee?ee.p(e,s):(ee&&ee.d(1),ee=Z&&Z(e),ee&&(ee.c(),ee.m(S,null))),(!J||1&s&&z!==(z="film/"+e[7].slug+"/"))&&h(r,"href",z),1&s&&f(t,"ispick",1===e[7].status),1&s&&f(t,"archived",3===e[7].status)},i(e){J||(E(L.$$.fragment,e),J=!0)},o(e){D(L.$$.fragment,e),J=!1},d(e){e&&c(t),$(L),ee&&ee.d()}}}function O(e){let t,r,s,m,w,M,T,$,F,I=e[4].section+"",A=e[4].stub&&z(e),k=e[4].films,S=[];for(let t=0;t<k.length;t+=1)S[t]=J(Y(e,k,t));const j=e=>D(S[e],1,1,(()=>{S[e]=null}));return{c(){t=a("div"),r=a("h2"),s=l(I),w=g(),A&&A.c(),M=g(),T=a("ul");for(let e=0;e<S.length;e+=1)S[e].c();$=g(),this.h()},l(e){t=i(e,"DIV",{});var a=n(t);r=i(a,"H2",{class:!0,id:!0});var l=n(r);s=o(l,I),l.forEach(c),w=v(a),A&&A.l(a),a.forEach(c),M=v(e),T=i(e,"UL",{class:!0});var h=n(T);for(let e=0;e<S.length;e+=1)S[e].l(h);$=v(h),h.forEach(c),this.h()},h(){h(r,"class","collection"),h(r,"id",m=e[4].slug),f(r,"archived",0===e[4].countPublished),h(T,"class","grid")},m(e,a){u(e,t,a),d(t,r),d(r,s),d(t,w),A&&A.m(t,null),u(e,M,a),u(e,T,a);for(let e=0;e<S.length;e+=1)S[e].m(T,null);d(T,$),F=!0},p(e,a){if((!F||1&a)&&I!==(I=e[4].section+"")&&p(s,I),(!F||1&a&&m!==(m=e[4].slug))&&h(r,"id",m),1&a&&f(r,"archived",0===e[4].countPublished),e[4].stub?A?A.p(e,a):(A=z(e),A.c(),A.m(t,null)):A&&(A.d(1),A=null),1&a){let t;for(k=e[4].films,t=0;t<k.length;t+=1){const r=Y(e,k,t);S[t]?(S[t].p(r,a),E(S[t],1)):(S[t]=J(r),S[t].c(),E(S[t],1),S[t].m(T,$))}for(V(),t=k.length;t<S.length;t+=1)j(t);y()}},i(e){if(!F){for(let e=0;e<k.length;e+=1)E(S[e]);F=!0}},o(e){S=S.filter(Boolean);for(let e=0;e<S.length;e+=1)D(S[e]);F=!1},d(e){e&&c(t),A&&A.d(),e&&c(M),e&&c(T),b(S,e)}}}function K(e){let t,r,s,l,o,f,p,I,A,k,S,j,q,U,Y,x;A=new P({props:{count:e[2]}});let R=e[0],z=[];for(let t=0;t<R.length;t+=1)z[t]=B(C(e,R,t));let _=e[1].length>0&&N(e),G=e[0],J=[];for(let t=0;t<G.length;t+=1)J[t]=O(L(e,G,t));const K=e=>D(J[e],1,1,(()=>{J[e]=null}));return{c(){t=a("meta"),r=a("meta"),s=a("meta"),l=a("meta"),o=g(),f=a("section"),p=a("div"),I=a("h1"),w(A.$$.fragment),k=g(),S=a("div");for(let e=0;e<z.length;e+=1)z[e].c();j=g(),_&&_.c(),q=g();for(let e=0;e<J.length;e+=1)J[e].c();this.h()},l(e){const a=F('[data-svelte="svelte-1hmvvng"]',document.head);t=i(a,"META",{property:!0,content:!0}),r=i(a,"META",{property:!0,content:!0}),s=i(a,"META",{property:!0,content:!0}),l=i(a,"META",{property:!0,content:!0}),a.forEach(c),o=v(e),f=i(e,"SECTION",{});var h=n(f);p=i(h,"DIV",{class:!0});var u=n(p);I=i(u,"H1",{class:!0});var d=n(I);M(A.$$.fragment,d),d.forEach(c),k=v(u),S=i(u,"DIV",{class:!0});var m=n(S);for(let e=0;e<z.length;e+=1)z[e].l(m);m.forEach(c),j=v(u),_&&_.l(u),q=v(u);for(let e=0;e<J.length;e+=1)J[e].l(u);u.forEach(c),h.forEach(c),this.h()},h(){document.title="\r\n    HENRI : Des films rares de la Cinémathèque française à voir en ligne\r\n  ",h(t,"property","og:url"),h(t,"content","https://www.cinematheque.fr/henri/"),h(r,"property","og:title"),h(r,"content","HENRI - Des films rares de la Cinémathèque française à voir en\r\n    ligne"),h(s,"property","og:image"),h(s,"content","https://www.cinematheque.fr/henri/logo-918x480.jpg"),h(l,"property","og:description"),h(l,"content","HENRI, la plateforme VOD de la Cinémathèque française vous propose\r\n    de découvrir gratuitement en ligne des films rares issus de ses collections."),h(I,"class","main-title"),h(S,"class","collections-list"),h(p,"class","container")},m(a,i){d(document.head,t),d(document.head,r),d(document.head,s),d(document.head,l),u(a,o,i),u(a,f,i),d(f,p),d(p,I),T(A,I,null),d(p,k),d(p,S);for(let e=0;e<z.length;e+=1)z[e].m(S,null);d(p,j),_&&_.m(p,null),d(p,q);for(let e=0;e<J.length;e+=1)J[e].m(p,null);U=!0,Y||(x=m(H,"popstate",e[3]),Y=!0)},p(e,[t]){if(1&t){let r;for(R=e[0],r=0;r<R.length;r+=1){const s=C(e,R,r);z[r]?z[r].p(s,t):(z[r]=B(s),z[r].c(),z[r].m(S,null))}for(;r<z.length;r+=1)z[r].d(1);z.length=R.length}if(e[1].length>0?_?_.p(e,t):(_=N(e),_.c(),_.m(p,q)):_&&(_.d(1),_=null),1&t){let r;for(G=e[0],r=0;r<G.length;r+=1){const s=L(e,G,r);J[r]?(J[r].p(s,t),E(J[r],1)):(J[r]=O(s),J[r].c(),E(J[r],1),J[r].m(p,null))}for(V(),r=G.length;r<J.length;r+=1)K(r);y()}},i(e){if(!U){E(A.$$.fragment,e);for(let e=0;e<G.length;e+=1)E(J[e]);U=!0}},o(e){D(A.$$.fragment,e),J=J.filter(Boolean);for(let e=0;e<J.length;e+=1)D(J[e]);U=!1},d(e){c(t),c(r),c(s),c(l),e&&c(o),e&&c(f),$(A),b(z,e),_&&_.d(),b(J,e),Y=!1,x()}}}async function Q({params:t,query:r}){let s=await this.fetch("headers.json");if(200===s.status){return s=await s.json(),{headers:s,pick:await Promise.all(e(s).map((e=>e.films)).flatten().filter((e=>1===e.status)).orderBy((e=>e.order)).map((async t=>{let r=await this.fetch(`film/${t.slug}.json`);if(r.status>=400)return null;let s=await r.json();return e({}).assign(t,e(s).pick(["section","synopsis","interpretation","adaptation"]).value()).value()})).value())}}this.error(res.status,data.message)}function W(t,r,s){S.locale("fr");let{headers:a}=r,{pick:l}=r,i=e(a).map((t=>e(t.films).filter((e=>1===e.status||2===e.status)).value())).flatten().value().length;return t.$$set=e=>{"headers"in e&&s(0,a=e.headers),"pick"in e&&s(1,l=e.pick)},[a,l,i,e=>{window.scrollTo({top:e.state&&e.state.top||0,behavior:"smooth"})}]}export default class extends t{constructor(e){super(),r(this,e,W,K,s,{headers:0,pick:1})}}export{Q as preload};
