import{l as t,S as e,i as r,s,e as a,t as i,c as l,a as n,b as o,d as c,f as h,g as f,h as u,j as d,k as m,m as p,n as g,o as v,p as b,q as E,r as w,u as M,v as T,w as D,x as $,y,z as F,A as I,H as A,B as V,C as k}from"./client.472d11b9.js";import{d as j,P as S}from"./PictoAge.69313d08.js";import"./dayjs_custom_locale_fr.399885a1.js";import{M as q}from"./MainTitle.1507e970.js";import{f as P}from"./format.c8943b7a.js";var U=function(t){t.preventDefault();const e=t.currentTarget,r=new URL(e.href).hash.replace("#",""),s=document.getElementById(r);window.scrollTo({top:s.offsetTop,behavior:"smooth"}),history.pushState({top:s.offsetTop},null,`#${r}`)};const{window:H}=I;function L(t,e,r){const s=t.slice();return s[4]=e[r],s}function Y(t,e,r){const s=t.slice();return s[7]=e[r],s}function x(t,e,r){const s=t.slice();return s[2]=e[r],s}function C(t,e,r){const s=t.slice();return s[4]=e[r],s}function B(t){let e,r,s,g,v,b,E=t[4].section+"";return{c(){e=a("a"),r=a("span"),s=i(E),this.h()},l(t){e=l(t,"A",{href:!0});var a=n(e);r=l(a,"SPAN",{});var i=n(r);s=o(i,E),i.forEach(c),a.forEach(c),this.h()},h(){h(e,"href",g="#"+t[4].slug),f(e,"archived",0===t[4].countPublished)},m(t,a){u(t,e,a),d(e,r),d(r,s),v||(b=m(e,"click",U),v=!0)},p(t,r){2&r&&E!==(E=t[4].section+"")&&p(s,E),2&r&&g!==(g="#"+t[4].slug)&&h(e,"href",g),2&r&&f(e,"archived",0===t[4].countPublished)},d(t){t&&c(e),v=!1,b()}}}function N(t){let e,r,s,f,m,E,w,M=1===t[2].length?"Le film":"Les films",T=j(t[2][0].datePublished).format("dddd D MMMM")+"",D=t[2],$=[];for(let e=0;e<D.length;e+=1)$[e]=R(x(t,D,e));return{c(){e=a("div"),r=a("div"),s=a("h2"),f=i(M),m=i("\r\n            du\r\n            "),E=i(T),w=g();for(let t=0;t<$.length;t+=1)$[t].c();this.h()},l(t){e=l(t,"DIV",{class:!0});var a=n(e);r=l(a,"DIV",{class:!0});var i=n(r);s=l(i,"H2",{});var h=n(s);f=o(h,M),m=o(h,"\r\n            du\r\n            "),E=o(h,T),h.forEach(c),i.forEach(c),w=v(a);for(let t=0;t<$.length;t+=1)$[t].l(a);a.forEach(c),this.h()},h(){h(r,"class","pick-label"),h(e,"class","pick-container")},m(t,a){u(t,e,a),d(e,r),d(r,s),d(s,f),d(s,m),d(s,E),d(e,w);for(let t=0;t<$.length;t+=1)$[t].m(e,null)},p(t,r){if(4&r&&M!==(M=1===t[2].length?"Le film":"Les films")&&p(f,M),4&r&&T!==(T=j(t[2][0].datePublished).format("dddd D MMMM")+"")&&p(E,T),4&r){let s;for(D=t[2],s=0;s<D.length;s+=1){const a=x(t,D,s);$[s]?$[s].p(a,r):($[s]=R(a),$[s].c(),$[s].m(e,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=D.length}},d(t){t&&c(e),b($,t)}}}function R(e){let r,s,f,m,b,E,w,M,T,D,$,y,F,I,V,k,j,S,q,U,H,L,Y,x,C,B,N,R,z,_,G,J,O,K=P.artTitre(e[2].artFr,e[2].titreFr)+"",Q=P.beforeAfterStr("<div class='sous-titre-fr'>","</div>",e[2].sousTitreFr)+"",W=e[2].duree+"",X=e[2].realisateurs+"",Z=e[2].annee+"",tt=P.beforeAfterStr("<div>","</div>",e[2].adaptation)+"",et=P.beforeAfterStr("<div>Avec ",".</div>",e[2].interpretation)+"",rt=P.beforeAfterStr("<div>","</div>",e[2].shortSynopsis||e[2].synopsis)+"";return{c(){r=a("div"),s=a("div"),f=a("a"),m=a("img"),w=g(),M=a("div"),T=a("div"),$=g(),F=g(),I=a("div"),V=i(W),j=g(),S=a("div"),q=a("div"),U=i(X),H=i(", "),L=i(Z),Y=g(),C=g(),N=g(),z=g(),_=a("a"),G=i("Voir le film"),O=g(),this.h()},l(t){r=l(t,"DIV",{class:!0});var e=n(r);s=l(e,"DIV",{class:!0});var a=n(s);f=l(a,"A",{rel:!0,href:!0,class:!0});var i=n(f);m=l(i,"IMG",{src:!0,alt:!0}),w=v(i),M=l(i,"DIV",{class:!0});var h=n(M);T=l(h,"DIV",{});var u=n(T);$=v(u),u.forEach(c),h.forEach(c),F=v(i),I=l(i,"DIV",{class:!0});var d=n(I);V=o(d,W),d.forEach(c),i.forEach(c),a.forEach(c),j=v(e),S=l(e,"DIV",{class:!0});var p=n(S);q=l(p,"DIV",{});var g=n(q);U=o(g,X),H=o(g,", "),L=o(g,Z),g.forEach(c),Y=v(p),C=v(p),N=v(p),z=v(p),_=l(p,"A",{class:!0,rel:!0,href:!0});var b=n(_);G=o(b,"Voir le film"),b.forEach(c),p.forEach(c),O=v(e),e.forEach(c),this.h()},h(){m.src!==(b=t.isUndefined(e[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[2].pk}-1.jpg`:`${e[2].thumb}`)&&h(m,"src",b),h(m,"alt",E=P.artTitre(e[2].artFr,e[2].titreFr)),D=new A($),y=new A(null),h(M,"class","pick-title-container"),h(I,"class","duree"),h(f,"rel","prefetch"),h(f,"href",k="film/"+e[2].slug+"/"),h(f,"class","pick-img"),h(s,"class","pick-img-container"),x=new A(C),B=new A(N),R=new A(z),h(_,"class","more"),h(_,"rel","prefetch"),h(_,"href",J="film/"+e[2].slug+"/"),h(S,"class","pick-film-info"),h(r,"class","pick")},m(t,e){u(t,r,e),d(r,s),d(s,f),d(f,m),d(f,w),d(f,M),d(M,T),D.m(K,T),d(T,$),y.m(Q,T),d(f,F),d(f,I),d(I,V),d(r,j),d(r,S),d(S,q),d(q,U),d(q,H),d(q,L),d(S,Y),x.m(tt,S),d(S,C),B.m(et,S),d(S,N),R.m(rt,S),d(S,z),d(S,_),d(_,G),d(r,O)},p(e,r){4&r&&m.src!==(b=t.isUndefined(e[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[2].pk}-1.jpg`:`${e[2].thumb}`)&&h(m,"src",b),4&r&&E!==(E=P.artTitre(e[2].artFr,e[2].titreFr))&&h(m,"alt",E),4&r&&K!==(K=P.artTitre(e[2].artFr,e[2].titreFr)+"")&&D.p(K),4&r&&Q!==(Q=P.beforeAfterStr("<div class='sous-titre-fr'>","</div>",e[2].sousTitreFr)+"")&&y.p(Q),4&r&&W!==(W=e[2].duree+"")&&p(V,W),4&r&&k!==(k="film/"+e[2].slug+"/")&&h(f,"href",k),4&r&&X!==(X=e[2].realisateurs+"")&&p(U,X),4&r&&Z!==(Z=e[2].annee+"")&&p(L,Z),4&r&&tt!==(tt=P.beforeAfterStr("<div>","</div>",e[2].adaptation)+"")&&x.p(tt),4&r&&et!==(et=P.beforeAfterStr("<div>Avec ",".</div>",e[2].interpretation)+"")&&B.p(et),4&r&&rt!==(rt=P.beforeAfterStr("<div>","</div>",e[2].shortSynopsis||e[2].synopsis)+"")&&R.p(rt),4&r&&J!==(J="film/"+e[2].slug+"/")&&h(_,"href",J)},d(t){t&&c(r)}}}function z(t){let e,r=(t[4].stub||"")+"";return{c(){e=a("div"),this.h()},l(t){e=l(t,"DIV",{class:!0}),n(e).forEach(c),this.h()},h(){h(e,"class","stub"),f(e,"archived",0===t[4].countPublished)},m(t,s){u(t,e,s),e.innerHTML=r},p(t,s){2&s&&r!==(r=(t[4].stub||"")+"")&&(e.innerHTML=r),2&s&&f(e,"archived",0===t[4].countPublished)},d(t){t&&c(e)}}}function _(t){let e,r,s,f=j(t[7].dateUnpublished).format(j().year()<j(t[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"";return{c(){e=a("div"),r=i("Jusqu'au\r\n                    "),s=i(f),this.h()},l(t){e=l(t,"DIV",{class:!0});var a=n(e);r=o(a,"Jusqu'au\r\n                    "),s=o(a,f),a.forEach(c),this.h()},h(){h(e,"class","end")},m(t,a){u(t,e,a),d(e,r),d(e,s)},p(t,e){2&e&&f!==(f=j(t[7].dateUnpublished).format(j().year()<j(t[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"")&&p(s,f)},d(t){t&&c(e)}}}function G(t){let e,r;return{c(){e=a("div"),r=i("Film indisponible"),this.h()},l(t){e=l(t,"DIV",{class:!0});var s=n(e);r=o(s,"Film indisponible"),s.forEach(c),this.h()},h(){h(e,"class","end")},m(t,s){u(t,e,s),d(e,r)},p:k,d(t){t&&c(e)}}}function J(t){let e,r,s,m,b,y,F,I,V,k,j,q,U,H,L,Y,x,C,B,N,R,z,J,O=t[7].duree+"",K=`${P.artTitre(t[7].artFr,t[7].titreFr)}${P.beforeAfterStr("string"==typeof t[7].sousTitreFr?t[7].sousTitreFr[0]===t[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",t[7].sousTitreFr)}`,Q=t[7].realisateurs+"",W=t[7].annee+"";function X(t,e){return 3===t[7].status?G:t[7].dateUnpublished?_:void 0}L=new S({props:{age:t[7].ageMin,size:"20"}});let Z=X(t),tt=Z&&Z(t);return{c(){e=a("li"),r=a("a"),s=a("div"),m=a("img"),F=g(),I=a("div"),V=i(O),k=g(),j=a("div"),q=a("div"),H=g(),w(L.$$.fragment),Y=g(),x=a("div"),C=i(Q),B=i(", "),N=i(W),R=g(),tt&&tt.c(),this.h()},l(t){e=l(t,"LI",{class:!0});var a=n(e);r=l(a,"A",{rel:!0,href:!0});var i=n(r);s=l(i,"DIV",{class:!0});var h=n(s);m=l(h,"IMG",{loading:!0,src:!0,alt:!0}),F=v(h),I=l(h,"DIV",{class:!0});var f=n(I);V=o(f,O),f.forEach(c),h.forEach(c),k=v(i),j=l(i,"DIV",{class:!0});var u=n(j);q=l(u,"DIV",{class:!0});var d=n(q);H=v(d),M(L.$$.fragment,d),d.forEach(c),Y=v(u),x=l(u,"DIV",{});var p=n(x);C=o(p,Q),B=o(p,", "),N=o(p,W),p.forEach(c),R=v(u),tt&&tt.l(u),u.forEach(c),i.forEach(c),a.forEach(c),this.h()},h(){h(m,"loading","lazy"),m.src!==(b=t[7].thumb)&&h(m,"src",b),h(m,"alt",y=P.artTitre(t[7].artFr,t[7].titreFr)),h(I,"class","duree"),h(s,"class","img-container"),U=new A(H),h(q,"class","titre"),h(j,"class","film-info"),h(r,"rel","prefetch"),h(r,"href",z="film/"+t[7].slug+"/"),h(e,"class","film"),f(e,"ispick",1===t[7].status),f(e,"archived",3===t[7].status)},m(t,a){u(t,e,a),d(e,r),d(r,s),d(s,m),d(s,F),d(s,I),d(I,V),d(r,k),d(r,j),d(j,q),U.m(K,q),d(q,H),T(L,q,null),d(j,Y),d(j,x),d(x,C),d(x,B),d(x,N),d(j,R),tt&&tt.m(j,null),J=!0},p(t,s){(!J||2&s&&m.src!==(b=t[7].thumb))&&h(m,"src",b),(!J||2&s&&y!==(y=P.artTitre(t[7].artFr,t[7].titreFr)))&&h(m,"alt",y),(!J||2&s)&&O!==(O=t[7].duree+"")&&p(V,O),(!J||2&s)&&K!==(K=`${P.artTitre(t[7].artFr,t[7].titreFr)}${P.beforeAfterStr("string"==typeof t[7].sousTitreFr?t[7].sousTitreFr[0]===t[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",t[7].sousTitreFr)}`)&&U.p(K);const a={};2&s&&(a.age=t[7].ageMin),L.$set(a),(!J||2&s)&&Q!==(Q=t[7].realisateurs+"")&&p(C,Q),(!J||2&s)&&W!==(W=t[7].annee+"")&&p(N,W),Z===(Z=X(t))&&tt?tt.p(t,s):(tt&&tt.d(1),tt=Z&&Z(t),tt&&(tt.c(),tt.m(j,null))),(!J||2&s&&z!==(z="film/"+t[7].slug+"/"))&&h(r,"href",z),2&s&&f(e,"ispick",1===t[7].status),2&s&&f(e,"archived",3===t[7].status)},i(t){J||(E(L.$$.fragment,t),J=!0)},o(t){D(L.$$.fragment,t),J=!1},d(t){t&&c(e),$(L),tt&&tt.d()}}}function O(t){let e,r,s,m,w,M,T,$,F,I=t[4].section+"",A=t[4].stub&&z(t),k=t[4].films,j=[];for(let e=0;e<k.length;e+=1)j[e]=J(Y(t,k,e));const S=t=>D(j[t],1,1,(()=>{j[t]=null}));return{c(){e=a("div"),r=a("h2"),s=i(I),w=g(),A&&A.c(),M=g(),T=a("ul");for(let t=0;t<j.length;t+=1)j[t].c();$=g(),this.h()},l(t){e=l(t,"DIV",{});var a=n(e);r=l(a,"H2",{class:!0,id:!0});var i=n(r);s=o(i,I),i.forEach(c),w=v(a),A&&A.l(a),a.forEach(c),M=v(t),T=l(t,"UL",{class:!0});var h=n(T);for(let t=0;t<j.length;t+=1)j[t].l(h);$=v(h),h.forEach(c),this.h()},h(){h(r,"class","collection"),h(r,"id",m=t[4].slug),f(r,"archived",0===t[4].countPublished),h(T,"class","grid")},m(t,a){u(t,e,a),d(e,r),d(r,s),d(e,w),A&&A.m(e,null),u(t,M,a),u(t,T,a);for(let t=0;t<j.length;t+=1)j[t].m(T,null);d(T,$),F=!0},p(t,a){if((!F||2&a)&&I!==(I=t[4].section+"")&&p(s,I),(!F||2&a&&m!==(m=t[4].slug))&&h(r,"id",m),2&a&&f(r,"archived",0===t[4].countPublished),t[4].stub?A?A.p(t,a):(A=z(t),A.c(),A.m(e,null)):A&&(A.d(1),A=null),2&a){let e;for(k=t[4].films,e=0;e<k.length;e+=1){const r=Y(t,k,e);j[e]?(j[e].p(r,a),E(j[e],1)):(j[e]=J(r),j[e].c(),E(j[e],1),j[e].m(T,$))}for(V(),e=k.length;e<j.length;e+=1)S(e);y()}},i(t){if(!F){for(let t=0;t<k.length;t+=1)E(j[t]);F=!0}},o(t){j=j.filter(Boolean);for(let t=0;t<j.length;t+=1)D(j[t]);F=!1},d(t){t&&c(e),A&&A.d(),t&&c(M),t&&c(T),b(j,t)}}}function K(t){let e,r,s,i,o,f,p,I,A,k,j,S,P,U,Y,x;A=new q({props:{count:t[0]}});let R=t[1],z=[];for(let e=0;e<R.length;e+=1)z[e]=B(C(t,R,e));let _=t[2].length>0&&N(t),G=t[1],J=[];for(let e=0;e<G.length;e+=1)J[e]=O(L(t,G,e));const K=t=>D(J[t],1,1,(()=>{J[t]=null}));return{c(){e=a("meta"),r=a("meta"),s=a("meta"),i=a("meta"),o=g(),f=a("section"),p=a("div"),I=a("h1"),w(A.$$.fragment),k=g(),j=a("div");for(let t=0;t<z.length;t+=1)z[t].c();S=g(),_&&_.c(),P=g();for(let t=0;t<J.length;t+=1)J[t].c();this.h()},l(t){const a=F('[data-svelte="svelte-1weqqqq"]',document.head);e=l(a,"META",{property:!0,content:!0}),r=l(a,"META",{property:!0,content:!0}),s=l(a,"META",{property:!0,content:!0}),i=l(a,"META",{property:!0,content:!0}),a.forEach(c),o=v(t),f=l(t,"SECTION",{});var h=n(f);p=l(h,"DIV",{class:!0});var u=n(p);I=l(u,"H1",{class:!0});var d=n(I);M(A.$$.fragment,d),d.forEach(c),k=v(u),j=l(u,"DIV",{class:!0});var m=n(j);for(let t=0;t<z.length;t+=1)z[t].l(m);m.forEach(c),S=v(u),_&&_.l(u),P=v(u);for(let t=0;t<J.length;t+=1)J[t].l(u);u.forEach(c),h.forEach(c),this.h()},h(){document.title="\r\n    HENRI : Des films rares de la Cinémathèque française à voir en ligne\r\n  ",h(e,"property","og:url"),h(e,"content","https://www.cinematheque.fr/henri/"),h(r,"property","og:title"),h(r,"content","HENRI - Des films rares de la Cinémathèque française à voir en ligne"),h(s,"property","og:image"),h(s,"content","https://www.cinematheque.fr/henri/logo-918x480.jpg"),h(i,"property","og:description"),h(i,"content","HENRI, la plateforme VOD de la Cinémathèque française vous propose\r\n    de découvrir gratuitement en ligne des films rares issus de ses collections."),h(I,"class","main-title"),h(j,"class","collections-list"),h(p,"class","container")},m(a,l){d(document.head,e),d(document.head,r),d(document.head,s),d(document.head,i),u(a,o,l),u(a,f,l),d(f,p),d(p,I),T(A,I,null),d(p,k),d(p,j);for(let t=0;t<z.length;t+=1)z[t].m(j,null);d(p,S),_&&_.m(p,null),d(p,P);for(let t=0;t<J.length;t+=1)J[t].m(p,null);U=!0,Y||(x=m(H,"popstate",t[3]),Y=!0)},p(t,[e]){const r={};if(1&e&&(r.count=t[0]),A.$set(r),2&e){let r;for(R=t[1],r=0;r<R.length;r+=1){const s=C(t,R,r);z[r]?z[r].p(s,e):(z[r]=B(s),z[r].c(),z[r].m(j,null))}for(;r<z.length;r+=1)z[r].d(1);z.length=R.length}if(t[2].length>0?_?_.p(t,e):(_=N(t),_.c(),_.m(p,P)):_&&(_.d(1),_=null),2&e){let r;for(G=t[1],r=0;r<G.length;r+=1){const s=L(t,G,r);J[r]?(J[r].p(s,e),E(J[r],1)):(J[r]=O(s),J[r].c(),E(J[r],1),J[r].m(p,null))}for(V(),r=G.length;r<J.length;r+=1)K(r);y()}},i(t){if(!U){E(A.$$.fragment,t);for(let t=0;t<G.length;t+=1)E(J[t]);U=!0}},o(t){D(A.$$.fragment,t),J=J.filter(Boolean);for(let t=0;t<J.length;t+=1)D(J[t]);U=!1},d(t){c(e),c(r),c(s),c(i),t&&c(o),t&&c(f),$(A),b(z,t),_&&_.d(),b(J,t),Y=!1,x()}}}async function Q({params:e,query:r}){this.fetch("pick.json");let s=await(await this.fetch("count.json")).json(),a=await this.fetch("headers.json");if(200===a.status){return a=await a.json(),{count:s,headers:a,pick:await Promise.all(t(a).map((t=>t.films)).flatten().filter((t=>1===t.status)).orderBy((t=>t.order)).map((async e=>{let r=await this.fetch(`film/${e.slug}.json`);if(r.status>=400)return null;let s=await r.json();return t({}).assign(e,t(s).pick(["section","synopsis","shortSynopsis","interpretation","adaptation"]).value()).value()})).value())}}this.error(res.status,data.message)}function W(t,e,r){j.locale("fr");let{count:s}=e,{headers:a}=e,{pick:i}=e;return t.$$set=t=>{"count"in t&&r(0,s=t.count),"headers"in t&&r(1,a=t.headers),"pick"in t&&r(2,i=t.pick)},[s,a,i,t=>{window.scrollTo({top:t.state&&t.state.top||0,behavior:"smooth"})}]}export default class extends e{constructor(t){super(),r(this,t,W,K,s,{count:0,headers:1,pick:2})}}export{Q as preload};
