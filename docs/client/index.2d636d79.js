import{l as e,S as t,i as r,s,e as a,t as i,c as l,a as n,b as o,d as c,f as h,g as f,h as u,j as d,k as m,m as p,n as g,o as v,p as E,q as b,r as w,u as M,v as T,w as D,x as $,y,z as F,A as I,H as A,B as V,C as k}from"./client.6f447e3e.js";import{d as j,P as S}from"./PictoAge.20cac74d.js";import"./dayjs_custom_locale_fr.e9cee30d.js";import{M as q}from"./MainTitle.4f07512f.js";import{f as P}from"./format.222ad93c.js";var U=function(e){e.preventDefault();const t=e.currentTarget,r=new URL(t.href).hash.replace("#",""),s=document.getElementById(r);window.scrollTo({top:s.offsetTop,behavior:"smooth"}),history.pushState({top:s.offsetTop},null,`#${r}`)};const{window:H}=I;function L(e,t,r){const s=e.slice();return s[4]=t[r],s}function Y(e,t,r){const s=e.slice();return s[7]=t[r],s}function x(e,t,r){const s=e.slice();return s[2]=t[r],s}function C(e,t,r){const s=e.slice();return s[4]=t[r],s}function B(e){let t,r,s,g,v,E,b=e[4].section+"";return{c(){t=a("a"),r=a("span"),s=i(b),this.h()},l(e){t=l(e,"A",{href:!0});var a=n(t);r=l(a,"SPAN",{});var i=n(r);s=o(i,b),i.forEach(c),a.forEach(c),this.h()},h(){h(t,"href",g="#"+e[4].slug),f(t,"archived",0===e[4].countPublished)},m(e,a){u(e,t,a),d(t,r),d(r,s),v||(E=m(t,"click",U),v=!0)},p(e,r){2&r&&b!==(b=e[4].section+"")&&p(s,b),2&r&&g!==(g="#"+e[4].slug)&&h(t,"href",g),2&r&&f(t,"archived",0===e[4].countPublished)},d(e){e&&c(t),v=!1,E()}}}function N(e){let t,r,s,f,m,b,w,M=1===e[2].length?"Le film":"Les films",T=j(e[2][0].datePublished).format("dddd D MMMM")+"",D=e[2],$=[];for(let t=0;t<D.length;t+=1)$[t]=R(x(e,D,t));return{c(){t=a("div"),r=a("div"),s=a("h2"),f=i(M),m=i("\r\n            du\r\n            "),b=i(T),w=g();for(let e=0;e<$.length;e+=1)$[e].c();this.h()},l(e){t=l(e,"DIV",{class:!0});var a=n(t);r=l(a,"DIV",{class:!0});var i=n(r);s=l(i,"H2",{});var h=n(s);f=o(h,M),m=o(h,"\r\n            du\r\n            "),b=o(h,T),h.forEach(c),i.forEach(c),w=v(a);for(let e=0;e<$.length;e+=1)$[e].l(a);a.forEach(c),this.h()},h(){h(r,"class","pick-label"),h(t,"class","pick-container")},m(e,a){u(e,t,a),d(t,r),d(r,s),d(s,f),d(s,m),d(s,b),d(t,w);for(let e=0;e<$.length;e+=1)$[e].m(t,null)},p(e,r){if(4&r&&M!==(M=1===e[2].length?"Le film":"Les films")&&p(f,M),4&r&&T!==(T=j(e[2][0].datePublished).format("dddd D MMMM")+"")&&p(b,T),4&r){let s;for(D=e[2],s=0;s<D.length;s+=1){const a=x(e,D,s);$[s]?$[s].p(a,r):($[s]=R(a),$[s].c(),$[s].m(t,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=D.length}},d(e){e&&c(t),E($,e)}}}function R(t){let r,s,f,m,E,b,w,M,T,D,$,y,F,I,V,k,j,S,q,U,H,L,Y,x,C,B,N,R,z,_,G,J,O,K=P.artTitre(t[2].artFr,t[2].titreFr)+"",Q=P.beforeAfterStr("<div class='sous-titre-fr'>","</div>",t[2].sousTitreFr)+"",W=t[2].duree+"",X=t[2].realisateurs+"",Z=t[2].annee+"",ee=P.beforeAfterStr("<div>","</div>",t[2].adaptation)+"",te=P.beforeAfterStr("<div>Avec ",".</div>",t[2].interpretation)+"",re=P.beforeAfterStr("<div>","</div>",t[2].shortSynopsis||t[2].synopsis)+"";return{c(){r=a("div"),s=a("div"),f=a("a"),m=a("img"),w=g(),M=a("div"),T=a("div"),$=g(),F=g(),I=a("div"),V=i(W),j=g(),S=a("div"),q=a("div"),U=i(X),H=i(", "),L=i(Z),Y=g(),C=g(),N=g(),z=g(),_=a("a"),G=i("Voir le film"),O=g(),this.h()},l(e){r=l(e,"DIV",{class:!0});var t=n(r);s=l(t,"DIV",{class:!0});var a=n(s);f=l(a,"A",{rel:!0,href:!0,class:!0});var i=n(f);m=l(i,"IMG",{src:!0,alt:!0}),w=v(i),M=l(i,"DIV",{class:!0});var h=n(M);T=l(h,"DIV",{});var u=n(T);$=v(u),u.forEach(c),h.forEach(c),F=v(i),I=l(i,"DIV",{class:!0});var d=n(I);V=o(d,W),d.forEach(c),i.forEach(c),a.forEach(c),j=v(t),S=l(t,"DIV",{class:!0});var p=n(S);q=l(p,"DIV",{});var g=n(q);U=o(g,X),H=o(g,", "),L=o(g,Z),g.forEach(c),Y=v(p),C=v(p),N=v(p),z=v(p),_=l(p,"A",{class:!0,rel:!0,href:!0});var E=n(_);G=o(E,"Voir le film"),E.forEach(c),p.forEach(c),O=v(t),t.forEach(c),this.h()},h(){m.src!==(E=e.isUndefined(t[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${t[2].pk}-1.jpg`:`${t[2].thumb}`)&&h(m,"src",E),h(m,"alt",b=P.artTitre(t[2].artFr,t[2].titreFr)),D=new A($),y=new A(null),h(M,"class","pick-title-container"),h(I,"class","duree"),h(f,"rel","prefetch"),h(f,"href",k="film/"+t[2].slug+"/"),h(f,"class","pick-img"),h(s,"class","pick-img-container"),x=new A(C),B=new A(N),R=new A(z),h(_,"class","more"),h(_,"rel","prefetch"),h(_,"href",J="film/"+t[2].slug+"/"),h(S,"class","pick-film-info"),h(r,"class","pick")},m(e,t){u(e,r,t),d(r,s),d(s,f),d(f,m),d(f,w),d(f,M),d(M,T),D.m(K,T),d(T,$),y.m(Q,T),d(f,F),d(f,I),d(I,V),d(r,j),d(r,S),d(S,q),d(q,U),d(q,H),d(q,L),d(S,Y),x.m(ee,S),d(S,C),B.m(te,S),d(S,N),R.m(re,S),d(S,z),d(S,_),d(_,G),d(r,O)},p(t,r){4&r&&m.src!==(E=e.isUndefined(t[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${t[2].pk}-1.jpg`:`${t[2].thumb}`)&&h(m,"src",E),4&r&&b!==(b=P.artTitre(t[2].artFr,t[2].titreFr))&&h(m,"alt",b),4&r&&K!==(K=P.artTitre(t[2].artFr,t[2].titreFr)+"")&&D.p(K),4&r&&Q!==(Q=P.beforeAfterStr("<div class='sous-titre-fr'>","</div>",t[2].sousTitreFr)+"")&&y.p(Q),4&r&&W!==(W=t[2].duree+"")&&p(V,W),4&r&&k!==(k="film/"+t[2].slug+"/")&&h(f,"href",k),4&r&&X!==(X=t[2].realisateurs+"")&&p(U,X),4&r&&Z!==(Z=t[2].annee+"")&&p(L,Z),4&r&&ee!==(ee=P.beforeAfterStr("<div>","</div>",t[2].adaptation)+"")&&x.p(ee),4&r&&te!==(te=P.beforeAfterStr("<div>Avec ",".</div>",t[2].interpretation)+"")&&B.p(te),4&r&&re!==(re=P.beforeAfterStr("<div>","</div>",t[2].shortSynopsis||t[2].synopsis)+"")&&R.p(re),4&r&&J!==(J="film/"+t[2].slug+"/")&&h(_,"href",J)},d(e){e&&c(r)}}}function z(e){let t,r=(e[4].stub||"")+"";return{c(){t=a("div"),this.h()},l(e){t=l(e,"DIV",{class:!0}),n(t).forEach(c),this.h()},h(){h(t,"class","stub"),f(t,"archived",0===e[4].countPublished)},m(e,s){u(e,t,s),t.innerHTML=r},p(e,s){2&s&&r!==(r=(e[4].stub||"")+"")&&(t.innerHTML=r),2&s&&f(t,"archived",0===e[4].countPublished)},d(e){e&&c(t)}}}function _(e){let t,r,s,f=j(e[7].dateUnpublished).format(j().year()<j(e[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"";return{c(){t=a("div"),r=i("Jusqu'au\r\n                    "),s=i(f),this.h()},l(e){t=l(e,"DIV",{class:!0});var a=n(t);r=o(a,"Jusqu'au\r\n                    "),s=o(a,f),a.forEach(c),this.h()},h(){h(t,"class","end")},m(e,a){u(e,t,a),d(t,r),d(t,s)},p(e,t){2&t&&f!==(f=j(e[7].dateUnpublished).format(j().year()<j(e[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"")&&p(s,f)},d(e){e&&c(t)}}}function G(e){let t,r;return{c(){t=a("div"),r=i("Film indisponible"),this.h()},l(e){t=l(e,"DIV",{class:!0});var s=n(t);r=o(s,"Film indisponible"),s.forEach(c),this.h()},h(){h(t,"class","end")},m(e,s){u(e,t,s),d(t,r)},p:k,d(e){e&&c(t)}}}function J(e){let t,r,s,m,E,y,F,I,V,k,j,q,U,H,L,Y,x,C,B,N,R,z,J,O=e[7].duree+"",K=`${P.artTitre(e[7].artFr,e[7].titreFr)}${P.beforeAfterStr("string"==typeof e[7].sousTitreFr?e[7].sousTitreFr[0]===e[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[7].sousTitreFr)}`,Q=e[7].realisateurs+"",W=e[7].annee+"";function X(e,t){return 3===e[7].status?G:e[7].dateUnpublished?_:void 0}L=new S({props:{age:e[7].ageMin,size:"20"}});let Z=X(e),ee=Z&&Z(e);return{c(){t=a("li"),r=a("a"),s=a("div"),m=a("img"),F=g(),I=a("div"),V=i(O),k=g(),j=a("div"),q=a("div"),H=g(),w(L.$$.fragment),Y=g(),x=a("div"),C=i(Q),B=i(", "),N=i(W),R=g(),ee&&ee.c(),this.h()},l(e){t=l(e,"LI",{class:!0});var a=n(t);r=l(a,"A",{rel:!0,href:!0});var i=n(r);s=l(i,"DIV",{class:!0});var h=n(s);m=l(h,"IMG",{loading:!0,src:!0,alt:!0}),F=v(h),I=l(h,"DIV",{class:!0});var f=n(I);V=o(f,O),f.forEach(c),h.forEach(c),k=v(i),j=l(i,"DIV",{class:!0});var u=n(j);q=l(u,"DIV",{class:!0});var d=n(q);H=v(d),M(L.$$.fragment,d),d.forEach(c),Y=v(u),x=l(u,"DIV",{});var p=n(x);C=o(p,Q),B=o(p,", "),N=o(p,W),p.forEach(c),R=v(u),ee&&ee.l(u),u.forEach(c),i.forEach(c),a.forEach(c),this.h()},h(){h(m,"loading","lazy"),m.src!==(E=e[7].thumb)&&h(m,"src",E),h(m,"alt",y=P.artTitre(e[7].artFr,e[7].titreFr)),h(I,"class","duree"),h(s,"class","img-container"),U=new A(H),h(q,"class","titre"),h(j,"class","film-info"),h(r,"rel","prefetch"),h(r,"href",z="film/"+e[7].slug+"/"),h(t,"class","film"),f(t,"ispick",1===e[7].status),f(t,"archived",3===e[7].status)},m(e,a){u(e,t,a),d(t,r),d(r,s),d(s,m),d(s,F),d(s,I),d(I,V),d(r,k),d(r,j),d(j,q),U.m(K,q),d(q,H),T(L,q,null),d(j,Y),d(j,x),d(x,C),d(x,B),d(x,N),d(j,R),ee&&ee.m(j,null),J=!0},p(e,s){(!J||2&s&&m.src!==(E=e[7].thumb))&&h(m,"src",E),(!J||2&s&&y!==(y=P.artTitre(e[7].artFr,e[7].titreFr)))&&h(m,"alt",y),(!J||2&s)&&O!==(O=e[7].duree+"")&&p(V,O),(!J||2&s)&&K!==(K=`${P.artTitre(e[7].artFr,e[7].titreFr)}${P.beforeAfterStr("string"==typeof e[7].sousTitreFr?e[7].sousTitreFr[0]===e[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[7].sousTitreFr)}`)&&U.p(K);const a={};2&s&&(a.age=e[7].ageMin),L.$set(a),(!J||2&s)&&Q!==(Q=e[7].realisateurs+"")&&p(C,Q),(!J||2&s)&&W!==(W=e[7].annee+"")&&p(N,W),Z===(Z=X(e))&&ee?ee.p(e,s):(ee&&ee.d(1),ee=Z&&Z(e),ee&&(ee.c(),ee.m(j,null))),(!J||2&s&&z!==(z="film/"+e[7].slug+"/"))&&h(r,"href",z),2&s&&f(t,"ispick",1===e[7].status),2&s&&f(t,"archived",3===e[7].status)},i(e){J||(b(L.$$.fragment,e),J=!0)},o(e){D(L.$$.fragment,e),J=!1},d(e){e&&c(t),$(L),ee&&ee.d()}}}function O(e){let t,r,s,m,w,M,T,$,F,I=e[4].section+"",A=e[4].stub&&z(e),k=e[4].films,j=[];for(let t=0;t<k.length;t+=1)j[t]=J(Y(e,k,t));const S=e=>D(j[e],1,1,(()=>{j[e]=null}));return{c(){t=a("div"),r=a("h2"),s=i(I),w=g(),A&&A.c(),M=g(),T=a("ul");for(let e=0;e<j.length;e+=1)j[e].c();$=g(),this.h()},l(e){t=l(e,"DIV",{});var a=n(t);r=l(a,"H2",{class:!0,id:!0});var i=n(r);s=o(i,I),i.forEach(c),w=v(a),A&&A.l(a),a.forEach(c),M=v(e),T=l(e,"UL",{class:!0});var h=n(T);for(let e=0;e<j.length;e+=1)j[e].l(h);$=v(h),h.forEach(c),this.h()},h(){h(r,"class","collection"),h(r,"id",m=e[4].slug),f(r,"archived",0===e[4].countPublished),h(T,"class","grid")},m(e,a){u(e,t,a),d(t,r),d(r,s),d(t,w),A&&A.m(t,null),u(e,M,a),u(e,T,a);for(let e=0;e<j.length;e+=1)j[e].m(T,null);d(T,$),F=!0},p(e,a){if((!F||2&a)&&I!==(I=e[4].section+"")&&p(s,I),(!F||2&a&&m!==(m=e[4].slug))&&h(r,"id",m),2&a&&f(r,"archived",0===e[4].countPublished),e[4].stub?A?A.p(e,a):(A=z(e),A.c(),A.m(t,null)):A&&(A.d(1),A=null),2&a){let t;for(k=e[4].films,t=0;t<k.length;t+=1){const r=Y(e,k,t);j[t]?(j[t].p(r,a),b(j[t],1)):(j[t]=J(r),j[t].c(),b(j[t],1),j[t].m(T,$))}for(V(),t=k.length;t<j.length;t+=1)S(t);y()}},i(e){if(!F){for(let e=0;e<k.length;e+=1)b(j[e]);F=!0}},o(e){j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)D(j[e]);F=!1},d(e){e&&c(t),A&&A.d(),e&&c(M),e&&c(T),E(j,e)}}}function K(e){let t,r,s,i,o,f,p,I,A,k,j,S,P,U,Y,x;A=new q({props:{count:e[0]}});let R=e[1],z=[];for(let t=0;t<R.length;t+=1)z[t]=B(C(e,R,t));let _=e[2].length>0&&N(e),G=e[1],J=[];for(let t=0;t<G.length;t+=1)J[t]=O(L(e,G,t));const K=e=>D(J[e],1,1,(()=>{J[e]=null}));return{c(){t=a("meta"),r=a("meta"),s=a("meta"),i=a("meta"),o=g(),f=a("section"),p=a("div"),I=a("h1"),w(A.$$.fragment),k=g(),j=a("div");for(let e=0;e<z.length;e+=1)z[e].c();S=g(),_&&_.c(),P=g();for(let e=0;e<J.length;e+=1)J[e].c();this.h()},l(e){const a=F('[data-svelte="svelte-1weqqqq"]',document.head);t=l(a,"META",{property:!0,content:!0}),r=l(a,"META",{property:!0,content:!0}),s=l(a,"META",{property:!0,content:!0}),i=l(a,"META",{property:!0,content:!0}),a.forEach(c),o=v(e),f=l(e,"SECTION",{});var h=n(f);p=l(h,"DIV",{class:!0});var u=n(p);I=l(u,"H1",{class:!0});var d=n(I);M(A.$$.fragment,d),d.forEach(c),k=v(u),j=l(u,"DIV",{class:!0});var m=n(j);for(let e=0;e<z.length;e+=1)z[e].l(m);m.forEach(c),S=v(u),_&&_.l(u),P=v(u);for(let e=0;e<J.length;e+=1)J[e].l(u);u.forEach(c),h.forEach(c),this.h()},h(){document.title="\r\n    HENRI : Des films rares de la Cinémathèque française à voir en ligne\r\n  ",h(t,"property","og:url"),h(t,"content","https://www.cinematheque.fr/henri/"),h(r,"property","og:title"),h(r,"content","HENRI - Des films rares de la Cinémathèque française à voir en ligne"),h(s,"property","og:image"),h(s,"content","https://www.cinematheque.fr/henri/logo-918x480.jpg"),h(i,"property","og:description"),h(i,"content","HENRI, la plateforme VOD de la Cinémathèque française vous propose\r\n    de découvrir gratuitement en ligne des films rares issus de ses collections."),h(I,"class","main-title"),h(j,"class","collections-list"),h(p,"class","container")},m(a,l){d(document.head,t),d(document.head,r),d(document.head,s),d(document.head,i),u(a,o,l),u(a,f,l),d(f,p),d(p,I),T(A,I,null),d(p,k),d(p,j);for(let e=0;e<z.length;e+=1)z[e].m(j,null);d(p,S),_&&_.m(p,null),d(p,P);for(let e=0;e<J.length;e+=1)J[e].m(p,null);U=!0,Y||(x=m(H,"popstate",e[3]),Y=!0)},p(e,[t]){const r={};if(1&t&&(r.count=e[0]),A.$set(r),2&t){let r;for(R=e[1],r=0;r<R.length;r+=1){const s=C(e,R,r);z[r]?z[r].p(s,t):(z[r]=B(s),z[r].c(),z[r].m(j,null))}for(;r<z.length;r+=1)z[r].d(1);z.length=R.length}if(e[2].length>0?_?_.p(e,t):(_=N(e),_.c(),_.m(p,P)):_&&(_.d(1),_=null),2&t){let r;for(G=e[1],r=0;r<G.length;r+=1){const s=L(e,G,r);J[r]?(J[r].p(s,t),b(J[r],1)):(J[r]=O(s),J[r].c(),b(J[r],1),J[r].m(p,null))}for(V(),r=G.length;r<J.length;r+=1)K(r);y()}},i(e){if(!U){b(A.$$.fragment,e);for(let e=0;e<G.length;e+=1)b(J[e]);U=!0}},o(e){D(A.$$.fragment,e),J=J.filter(Boolean);for(let e=0;e<J.length;e+=1)D(J[e]);U=!1},d(e){c(t),c(r),c(s),c(i),e&&c(o),e&&c(f),$(A),E(z,e),_&&_.d(),E(J,e),Y=!1,x()}}}async function Q({params:t,query:r}){let s=await(await this.fetch("count.json")).json(),a=await this.fetch("headers.json");if(200===a.status){return a=await a.json(),{count:s,headers:a,pick:await Promise.all(e(a).map((e=>e.films)).flatten().filter((e=>1===e.status)).orderBy((e=>e.order)).map((async t=>{let r=await this.fetch(`film/${t.slug}.json`);if(r.status>=400)return null;let s=await r.json();return e({}).assign(t,e(s).pick(["section","synopsis","interpretation","adaptation"]).value()).value()})).value())}}this.error(res.status,data.message)}function W(e,t,r){j.locale("fr");let{count:s}=t,{headers:a}=t,{pick:i}=t;return e.$$set=e=>{"count"in e&&r(0,s=e.count),"headers"in e&&r(1,a=e.headers),"pick"in e&&r(2,i=e.pick)},[s,a,i,e=>{window.scrollTo({top:e.state&&e.state.top||0,behavior:"smooth"})}]}export default class extends t{constructor(e){super(),r(this,e,W,K,s,{count:0,headers:1,pick:2})}}export{Q as preload};
