import{S as e,i as r,s as t,e as s,t as a,a as l,c as i,b as n,d as c,f as o,g as h,h as f,j as d,k as u,l as m,m as p,n as g,o as v,p as E,q as w,r as D,u as F,v as I,w as M,x as $,y,H as V,z as k,A as b}from"./client.1e6daec9.js";import{l as A,d as T,f as C,a as H,P as j}from"./PictoAge.238f24af.js";import"./dayjs_custom_locale_fr.3750a909.js";import{M as q}from"./MainTitle.83ca5a95.js";var L=function(e){e.preventDefault();const r=e.currentTarget,t=new URL(r.href).hash.replace("#",""),s=document.getElementById(t);window.scrollTo({top:s.offsetTop,behavior:"smooth"}),history.pushState({},"","#"+t)};function S(e,r,t){const s=e.slice();return s[5]=r[t],s}function U(e,r,t){const s=e.slice();return s[2]=r[t],s}function P(e,r,t){const s=e.slice();return s[1]=r[t],s}function x(e,r,t){const s=e.slice();return s[2]=r[t],s}function B(e){let r,t,v,E,w,D,F=e[2].name.replace(/\s+/g,String.fromCharCode(160)).replace(/-/g,String.fromCharCode(8209))+"";return{c(){r=s("a"),t=a(F),v=l(),this.h()},l(e){r=i(e,"A",{href:!0});var s=n(r);t=c(s,F),v=o(s),s.forEach(h),this.h()},h(){f(r,"href",E="#"+e[2].slug),d(r,"archived",e[2].isArchived),d(r,"glow",e[2].name===e[1][0].collection)},m(e,s){u(e,r,s),m(r,t),m(r,v),w||(D=p(r,"click",L),w=!0)},p(e,s){1&s&&F!==(F=e[2].name.replace(/\s+/g,String.fromCharCode(160)).replace(/-/g,String.fromCharCode(8209))+"")&&g(t,F),1&s&&E!==(E="#"+e[2].slug)&&f(r,"href",E),1&s&&d(r,"archived",e[2].isArchived),3&s&&d(r,"glow",e[2].name===e[1][0].collection)},d(e){e&&h(r),w=!1,D()}}}function N(e){let r,t,d,p,E,w,D,F=1===e[1].length?"Le film":"Les films",I=T(e[1][0].datePublished).format("dddd D MMMM")+"",M=e[1],$=[];for(let r=0;r<M.length;r+=1)$[r]=R(P(e,M,r));return{c(){r=s("div"),t=s("div"),d=s("h2"),p=a(F),E=a("\r\n            du\r\n            "),w=a(I),D=l();for(let e=0;e<$.length;e+=1)$[e].c();this.h()},l(e){r=i(e,"DIV",{class:!0});var s=n(r);t=i(s,"DIV",{class:!0});var a=n(t);d=i(a,"H2",{});var l=n(d);p=c(l,F),E=c(l,"\r\n            du\r\n            "),w=c(l,I),l.forEach(h),a.forEach(h),D=o(s);for(let e=0;e<$.length;e+=1)$[e].l(s);s.forEach(h),this.h()},h(){f(t,"class","pick-label"),f(r,"class","pick-container")},m(e,s){u(e,r,s),m(r,t),m(t,d),m(d,p),m(d,E),m(d,w),m(r,D);for(let e=0;e<$.length;e+=1)$[e].m(r,null)},p(e,t){if(2&t&&F!==(F=1===e[1].length?"Le film":"Les films")&&g(p,F),2&t&&I!==(I=T(e[1][0].datePublished).format("dddd D MMMM")+"")&&g(w,I),2&t){let s;for(M=e[1],s=0;s<M.length;s+=1){const a=P(e,M,s);$[s]?$[s].p(a,t):($[s]=R(a),$[s].c(),$[s].m(r,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=M.length}},d(e){e&&h(r),v($,e)}}}function R(e){let r,t,d,p,v,E,w,D,F,I,M,$,y,k,b,T,j,q,L,S,U,P,x,B,N,R,z,_,G,J,O,K,Q,W,X,Y=C(e[1].artFr,e[1].titreFr)+"",Z=H("<div class='sous-titre-fr'>","</div>",e[1].sousTitreFr)+"",ee=e[1].duree+"",re=e[1].realisateurs+"",te=e[1].annee+"",se=H("<div>","</div>",e[1].adaptation)+"",ae=H("<div>Avec ",".</div>",e[1].interpretation)+"",le=H("<div>","</div>",e[1].shortSynopsis||e[1].synopsis)+"",ie=H('<div class="rem">',"</div>",e[1].remarque)+"";return{c(){r=s("div"),t=s("div"),d=s("a"),p=s("img"),w=l(),D=s("div"),F=s("div"),M=l(),y=l(),k=s("div"),b=a(ee),j=l(),q=s("div"),L=s("div"),S=a(re),U=a(", "),P=a(te),x=l(),N=l(),z=l(),G=l(),O=l(),K=s("a"),Q=a("Voir le film"),X=l(),this.h()},l(e){r=i(e,"DIV",{class:!0});var s=n(r);t=i(s,"DIV",{class:!0});var a=n(t);d=i(a,"A",{rel:!0,href:!0,class:!0});var l=n(d);p=i(l,"IMG",{src:!0,alt:!0}),w=o(l),D=i(l,"DIV",{class:!0});var f=n(D);F=i(f,"DIV",{});var u=n(F);M=o(u),u.forEach(h),f.forEach(h),y=o(l),k=i(l,"DIV",{class:!0});var m=n(k);b=c(m,ee),m.forEach(h),l.forEach(h),a.forEach(h),j=o(s),q=i(s,"DIV",{class:!0});var g=n(q);L=i(g,"DIV",{});var v=n(L);S=c(v,re),U=c(v,", "),P=c(v,te),v.forEach(h),x=o(g),N=o(g),z=o(g),G=o(g),O=o(g),K=i(g,"A",{class:!0,rel:!0,href:!0});var E=n(K);Q=c(E,"Voir le film"),E.forEach(h),g.forEach(h),X=o(s),s.forEach(h),this.h()},h(){p.src!==(v=A.isUndefined(e[1].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[1].pk}-1.jpg`:""+e[1].thumb)&&f(p,"src",v),f(p,"alt",E=C(e[1].artFr,e[1].titreFr)),I=new V(M),$=new V(null),f(D,"class","pick-title-container"),f(k,"class","duree"),f(d,"rel","prefetch"),f(d,"href",T="film/"+e[1].slug+"/"),f(d,"class","pick-img"),f(t,"class","pick-img-container"),B=new V(N),R=new V(z),_=new V(G),J=new V(O),f(K,"class","more"),f(K,"rel","prefetch"),f(K,"href",W="film/"+e[1].slug+"/"),f(q,"class","pick-film-info"),f(r,"class","pick")},m(e,s){u(e,r,s),m(r,t),m(t,d),m(d,p),m(d,w),m(d,D),m(D,F),I.m(Y,F),m(F,M),$.m(Z,F),m(d,y),m(d,k),m(k,b),m(r,j),m(r,q),m(q,L),m(L,S),m(L,U),m(L,P),m(q,x),B.m(se,q),m(q,N),R.m(ae,q),m(q,z),_.m(le,q),m(q,G),J.m(ie,q),m(q,O),m(q,K),m(K,Q),m(r,X)},p(e,r){2&r&&p.src!==(v=A.isUndefined(e[1].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[1].pk}-1.jpg`:""+e[1].thumb)&&f(p,"src",v),2&r&&E!==(E=C(e[1].artFr,e[1].titreFr))&&f(p,"alt",E),2&r&&Y!==(Y=C(e[1].artFr,e[1].titreFr)+"")&&I.p(Y),2&r&&Z!==(Z=H("<div class='sous-titre-fr'>","</div>",e[1].sousTitreFr)+"")&&$.p(Z),2&r&&ee!==(ee=e[1].duree+"")&&g(b,ee),2&r&&T!==(T="film/"+e[1].slug+"/")&&f(d,"href",T),2&r&&re!==(re=e[1].realisateurs+"")&&g(S,re),2&r&&te!==(te=e[1].annee+"")&&g(P,te),2&r&&se!==(se=H("<div>","</div>",e[1].adaptation)+"")&&B.p(se),2&r&&ae!==(ae=H("<div>Avec ",".</div>",e[1].interpretation)+"")&&R.p(ae),2&r&&le!==(le=H("<div>","</div>",e[1].shortSynopsis||e[1].synopsis)+"")&&_.p(le),2&r&&ie!==(ie=H('<div class="rem">',"</div>",e[1].remarque)+"")&&J.p(ie),2&r&&W!==(W="film/"+e[1].slug+"/")&&f(K,"href",W)},d(e){e&&h(r)}}}function z(e){let r,t=e[2].header.stub+"";return{c(){r=s("div"),this.h()},l(e){r=i(e,"DIV",{class:!0}),n(r).forEach(h),this.h()},h(){f(r,"class","stub"),d(r,"archived",e[2].isArchived)},m(e,s){u(e,r,s),r.innerHTML=t},p(e,s){1&s&&t!==(t=e[2].header.stub+"")&&(r.innerHTML=t),1&s&&d(r,"archived",e[2].isArchived)},d(e){e&&h(r)}}}function _(e){let r,t,l,o=T(e[5].dateUnpublished).format("D MMM")+"";return{c(){r=s("div"),t=a("Jusqu'au\r\n                      "),l=a(o),this.h()},l(e){r=i(e,"DIV",{class:!0});var s=n(r);t=c(s,"Jusqu'au\r\n                      "),l=c(s,o),s.forEach(h),this.h()},h(){f(r,"class","end")},m(e,s){u(e,r,s),m(r,t),m(r,l)},p(e,r){1&r&&o!==(o=T(e[5].dateUnpublished).format("D MMM")+"")&&g(l,o)},d(e){e&&h(r)}}}function G(e){let r,t;return{c(){r=s("div"),t=a("Film indisponible"),this.h()},l(e){r=i(e,"DIV",{class:!0});var s=n(r);t=c(s,"Film indisponible"),s.forEach(h),this.h()},h(){f(r,"class","end")},m(e,s){u(e,r,s),m(r,t)},p:b,d(e){e&&h(r)}}}function J(e){let r,t,p,v,$,y,k,b,A,T,q,L,S,U,P,x,B,N,R,z,J,O,K,Q,W=e[5].duree+"",X=`${C(e[5].artFr,e[5].titreFr)}${H("string"==typeof e[5].sousTitreFr?e[5].sousTitreFr[0]===e[5].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[5].sousTitreFr)}`,Y=e[5].realisateurs+"",Z=e[5].annee+"";function ee(e,r){return 3===e[5].status?G:e[5].dateUnpublished?_:void 0}P=new j({props:{age:e[5].ageMin,size:"20"}});let re=ee(e),te=re&&re(e);return{c(){r=s("li"),t=s("a"),p=s("div"),v=s("img"),k=l(),b=s("div"),A=a(W),T=l(),q=s("div"),L=s("div"),U=l(),w(P.$$.fragment),x=l(),B=s("div"),N=a(Y),R=a(", "),z=a(Z),J=l(),te&&te.c(),K=l(),this.h()},l(e){r=i(e,"LI",{class:!0});var s=n(r);t=i(s,"A",{rel:!0,href:!0});var a=n(t);p=i(a,"DIV",{class:!0});var l=n(p);v=i(l,"IMG",{loading:!0,src:!0,alt:!0}),k=o(l),b=i(l,"DIV",{class:!0});var f=n(b);A=c(f,W),f.forEach(h),l.forEach(h),T=o(a),q=i(a,"DIV",{class:!0});var d=n(q);L=i(d,"DIV",{class:!0});var u=n(L);U=o(u),D(P.$$.fragment,u),u.forEach(h),x=o(d),B=i(d,"DIV",{});var m=n(B);N=c(m,Y),R=c(m,", "),z=c(m,Z),m.forEach(h),J=o(d),te&&te.l(d),d.forEach(h),a.forEach(h),K=o(s),s.forEach(h),this.h()},h(){f(v,"loading","lazy"),v.src!==($=e[5].thumb)&&f(v,"src",$),f(v,"alt",y=C(e[5].artFr,e[5].titreFr)),f(b,"class","duree"),f(p,"class","img-container"),S=new V(U),f(L,"class","titre"),f(q,"class","film-info"),f(t,"rel","prefetch"),f(t,"href",O="film/"+e[5].slug+"/"),f(r,"class","film"),d(r,"archived",e[5].isArchived),d(r,"ispick",e[5].isPick)},m(e,s){u(e,r,s),m(r,t),m(t,p),m(p,v),m(p,k),m(p,b),m(b,A),m(t,T),m(t,q),m(q,L),S.m(X,L),m(L,U),F(P,L,null),m(q,x),m(q,B),m(B,N),m(B,R),m(B,z),m(q,J),te&&te.m(q,null),m(r,K),Q=!0},p(e,s){(!Q||1&s&&v.src!==($=e[5].thumb))&&f(v,"src",$),(!Q||1&s&&y!==(y=C(e[5].artFr,e[5].titreFr)))&&f(v,"alt",y),(!Q||1&s)&&W!==(W=e[5].duree+"")&&g(A,W),(!Q||1&s)&&X!==(X=`${C(e[5].artFr,e[5].titreFr)}${H("string"==typeof e[5].sousTitreFr?e[5].sousTitreFr[0]===e[5].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[5].sousTitreFr)}`)&&S.p(X);const a={};1&s&&(a.age=e[5].ageMin),P.$set(a),(!Q||1&s)&&Y!==(Y=e[5].realisateurs+"")&&g(N,Y),(!Q||1&s)&&Z!==(Z=e[5].annee+"")&&g(z,Z),re===(re=ee(e))&&te?te.p(e,s):(te&&te.d(1),te=re&&re(e),te&&(te.c(),te.m(q,null))),(!Q||1&s&&O!==(O="film/"+e[5].slug+"/"))&&f(t,"href",O),1&s&&d(r,"archived",e[5].isArchived),1&s&&d(r,"ispick",e[5].isPick)},i(e){Q||(E(P.$$.fragment,e),Q=!0)},o(e){I(P.$$.fragment,e),Q=!1},d(e){e&&h(r),M(P),te&&te.d()}}}function O(e){let r,t,p,w,D,F,M,y,V,b=e[2].name+"",A=e[2].header.stub&&z(e),T=e[2].films,C=[];for(let r=0;r<T.length;r+=1)C[r]=J(S(e,T,r));const H=e=>I(C[e],1,1,()=>{C[e]=null});return{c(){r=s("div"),t=s("h2"),p=a(b),D=l(),A&&A.c(),F=l(),M=s("ul");for(let e=0;e<C.length;e+=1)C[e].c();y=l(),this.h()},l(e){r=i(e,"DIV",{});var s=n(r);t=i(s,"H2",{class:!0,id:!0});var a=n(t);p=c(a,b),a.forEach(h),D=o(s),A&&A.l(s),F=o(s),M=i(s,"UL",{class:!0});var l=n(M);for(let e=0;e<C.length;e+=1)C[e].l(l);l.forEach(h),y=o(s),s.forEach(h),this.h()},h(){f(t,"class","collection"),f(t,"id",w=e[2].slug),d(t,"archived",e[2].isArchived),f(M,"class","grid")},m(e,s){u(e,r,s),m(r,t),m(t,p),m(r,D),A&&A.m(r,null),m(r,F),m(r,M);for(let e=0;e<C.length;e+=1)C[e].m(M,null);m(r,y),V=!0},p(e,s){if((!V||1&s)&&b!==(b=e[2].name+"")&&g(p,b),(!V||1&s&&w!==(w=e[2].slug))&&f(t,"id",w),1&s&&d(t,"archived",e[2].isArchived),e[2].header.stub?A?A.p(e,s):(A=z(e),A.c(),A.m(r,F)):A&&(A.d(1),A=null),1&s){let r;for(T=e[2].films,r=0;r<T.length;r+=1){const t=S(e,T,r);C[r]?(C[r].p(t,s),E(C[r],1)):(C[r]=J(t),C[r].c(),E(C[r],1),C[r].m(M,null))}for(k(),r=T.length;r<C.length;r+=1)H(r);$()}},i(e){if(!V){for(let e=0;e<T.length;e+=1)E(C[e]);V=!0}},o(e){C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)I(C[e]);V=!1},d(e){e&&h(r),A&&A.d(),v(C,e)}}}function K(e){let r,t,a,c,d,p,g,V,b,A,T,C,H,j;b=new q({});let L=e[0],S=[];for(let r=0;r<L.length;r+=1)S[r]=B(x(e,L,r));let P=e[1].length>0&&N(e),R=e[0],z=[];for(let r=0;r<R.length;r+=1)z[r]=O(U(e,R,r));const _=e=>I(z[e],1,1,()=>{z[e]=null});return{c(){r=s("meta"),t=s("meta"),a=s("meta"),c=s("meta"),d=l(),p=s("section"),g=s("div"),V=s("h1"),w(b.$$.fragment),A=l(),T=s("div");for(let e=0;e<S.length;e+=1)S[e].c();C=l(),P&&P.c(),H=l();for(let e=0;e<z.length;e+=1)z[e].c();this.h()},l(e){const s=y('[data-svelte="svelte-2kporm"]',document.head);r=i(s,"META",{property:!0,content:!0}),t=i(s,"META",{property:!0,content:!0}),a=i(s,"META",{property:!0,content:!0}),c=i(s,"META",{property:!0,content:!0}),s.forEach(h),d=o(e),p=i(e,"SECTION",{});var l=n(p);g=i(l,"DIV",{class:!0});var f=n(g);V=i(f,"H1",{class:!0});var u=n(V);D(b.$$.fragment,u),u.forEach(h),A=o(f),T=i(f,"DIV",{class:!0});var m=n(T);for(let e=0;e<S.length;e+=1)S[e].l(m);m.forEach(h),C=o(f),P&&P.l(f),H=o(f);for(let e=0;e<z.length;e+=1)z[e].l(f);f.forEach(h),l.forEach(h),this.h()},h(){document.title="\r\n    HENRI : Des films rares de la Cinémathèque française à voir en ligne\r\n  ",f(r,"property","og:url"),f(r,"content","https://www.cinematheque.fr/henri/"),f(t,"property","og:title"),f(t,"content","HENRI - Des films rares de la Cinémathèque française à voir en\r\n    ligne"),f(a,"property","og:image"),f(a,"content","https://www.cinematheque.fr/henri/logo-918x480.jpg"),f(c,"property","og:description"),f(c,"content","HENRI, la plateforme VOD de la Cinémathèque française vous propose\r\n    de découvrir gratuitement en ligne des films rares issus de ses collections."),f(V,"class","svelte-14mm8il"),f(T,"class","collections-list"),f(g,"class","container")},m(e,s){m(document.head,r),m(document.head,t),m(document.head,a),m(document.head,c),u(e,d,s),u(e,p,s),m(p,g),m(g,V),F(b,V,null),m(g,A),m(g,T);for(let e=0;e<S.length;e+=1)S[e].m(T,null);m(g,C),P&&P.m(g,null),m(g,H);for(let e=0;e<z.length;e+=1)z[e].m(g,null);j=!0},p(e,[r]){if(3&r){let t;for(L=e[0],t=0;t<L.length;t+=1){const s=x(e,L,t);S[t]?S[t].p(s,r):(S[t]=B(s),S[t].c(),S[t].m(T,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=L.length}if(e[1].length>0?P?P.p(e,r):(P=N(e),P.c(),P.m(g,H)):P&&(P.d(1),P=null),1&r){let t;for(R=e[0],t=0;t<R.length;t+=1){const s=U(e,R,t);z[t]?(z[t].p(s,r),E(z[t],1)):(z[t]=O(s),z[t].c(),E(z[t],1),z[t].m(g,null))}for(k(),t=R.length;t<z.length;t+=1)_(t);$()}},i(e){if(!j){E(b.$$.fragment,e);for(let e=0;e<R.length;e+=1)E(z[e]);j=!0}},o(e){I(b.$$.fragment,e),z=z.filter(Boolean);for(let e=0;e<z.length;e+=1)I(z[e]);j=!1},d(e){h(r),h(t),h(a),h(c),e&&h(d),e&&h(p),M(b),v(S,e),P&&P.d(),v(z,e)}}}async function Q({params:e,query:r}){let t=await this.fetch("collections-headers.json");if(200===t.status){t=await t.json();let e=A(t).map(e=>e.films).flatten().filter(e=>!e.isArchived&&e.isPick).orderBy(e=>e.order).map(e=>e.slug).value();return e=await Promise.all(A(e).map(async e=>{let r=await this.fetch(`film/${e}.json`);return r.status>=400?null:await r.json()}).value()),e=A.compact(e),{collectionsHeaders:t,pick:e}}this.error(res.status,data.message)}function W(e,r,t){T.locale("fr");let{collectionsHeaders:s}=r,{pick:a}=r;return e.$set=e=>{"collectionsHeaders"in e&&t(0,s=e.collectionsHeaders),"pick"in e&&t(1,a=e.pick)},[s,a]}export default class extends e{constructor(e){super(),r(this,e,W,K,t,{collectionsHeaders:0,pick:1})}}export{Q as preload};
