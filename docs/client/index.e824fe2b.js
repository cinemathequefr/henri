import{S as e,i as t,s as r,e as s,t as a,c as i,a as l,b as n,d as o,f as c,g as h,h as f,j as u,l as d,k as m,m as p,n as g,o as v,p as b,q as E,r as w,u as M,v as T,w as D,x as $,y,z as F,H as I,A,B as V}from"./client.8902ad53.js";import{l as k,f as S}from"./format.2c429d88.js";import{d as j,P as q}from"./PictoAge.b7b011df.js";import"./dayjs_custom_locale_fr.ced3c9f8.js";import{M as P}from"./MainTitle.39bdb8d4.js";var U=function(e){e.preventDefault();const t=e.currentTarget,r=new URL(t.href).hash.replace("#",""),s=document.getElementById(r);window.scrollTo({top:s.offsetTop,behavior:"smooth"}),history.pushState({top:s.offsetTop},null,`#${r}`)};const{window:H}=F;function L(e,t,r){const s=e.slice();return s[4]=t[r],s}function Y(e,t,r){const s=e.slice();return s[7]=t[r],s}function x(e,t,r){const s=e.slice();return s[2]=t[r],s}function C(e,t,r){const s=e.slice();return s[4]=t[r],s}function B(e){let t,r,p,g,v,b,E=e[4].section+"";return{c(){t=s("a"),r=s("span"),p=a(E),this.h()},l(e){t=i(e,"A",{href:!0});var s=l(t);r=i(s,"SPAN",{});var a=l(r);p=n(a,E),a.forEach(o),s.forEach(o),this.h()},h(){c(t,"href",g="#"+e[4].slug),h(t,"archived",0===e[4].countPublished)},m(e,s){f(e,t,s),u(t,r),u(r,p),v||(b=d(t,"click",U),v=!0)},p(e,r){2&r&&E!==(E=e[4].section+"")&&m(p,E),2&r&&g!==(g="#"+e[4].slug)&&c(t,"href",g),2&r&&h(t,"archived",0===e[4].countPublished)},d(e){e&&o(t),v=!1,b()}}}function N(e){let t,r,h,d,b,E,w,M=1===e[2].length?"Le film":"Les films",T=j(e[2][0].datePublished).format("dddd D MMMM")+"",D=e[2],$=[];for(let t=0;t<D.length;t+=1)$[t]=R(x(e,D,t));return{c(){t=s("div"),r=s("div"),h=s("h2"),d=a(M),b=a("\r\n            du\r\n            "),E=a(T),w=p();for(let e=0;e<$.length;e+=1)$[e].c();this.h()},l(e){t=i(e,"DIV",{class:!0});var s=l(t);r=i(s,"DIV",{class:!0});var a=l(r);h=i(a,"H2",{});var c=l(h);d=n(c,M),b=n(c,"\r\n            du\r\n            "),E=n(c,T),c.forEach(o),a.forEach(o),w=g(s);for(let e=0;e<$.length;e+=1)$[e].l(s);s.forEach(o),this.h()},h(){c(r,"class","pick-label"),c(t,"class","pick-container")},m(e,s){f(e,t,s),u(t,r),u(r,h),u(h,d),u(h,b),u(h,E),u(t,w);for(let e=0;e<$.length;e+=1)$[e].m(t,null)},p(e,r){if(4&r&&M!==(M=1===e[2].length?"Le film":"Les films")&&m(d,M),4&r&&T!==(T=j(e[2][0].datePublished).format("dddd D MMMM")+"")&&m(E,T),4&r){let s;for(D=e[2],s=0;s<D.length;s+=1){const a=x(e,D,s);$[s]?$[s].p(a,r):($[s]=R(a),$[s].c(),$[s].m(t,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=D.length}},d(e){e&&o(t),v($,e)}}}function R(e){let t,r,h,d,v,b,E,w,M,T,D,$,y,F,A,V,j,q,P,U,H,L,Y,x,C,B,N,R,z,_,G,J,O,K=S.artTitre(e[2].artFr,e[2].titreFr)+"",Q=S.beforeAfterStr("<div class='sous-titre-fr'>","</div>",e[2].sousTitreFr)+"",W=e[2].duree+"",X=e[2].realisateurs+"",Z=e[2].annee+"",ee=S.beforeAfterStr("<div>","</div>",e[2].adaptation)+"",te=S.beforeAfterStr("<div>Avec ",".</div>",e[2].interpretation)+"",re=S.beforeAfterStr("<div>","</div>",e[2].shortSynopsis||e[2].synopsis)+"";return{c(){t=s("div"),r=s("div"),h=s("a"),d=s("img"),E=p(),w=s("div"),M=s("div"),D=p(),y=p(),F=s("div"),A=a(W),j=p(),q=s("div"),P=s("div"),U=a(X),H=a(", "),L=a(Z),Y=p(),C=p(),N=p(),z=p(),_=s("a"),G=a("Voir le film"),O=p(),this.h()},l(e){t=i(e,"DIV",{class:!0});var s=l(t);r=i(s,"DIV",{class:!0});var a=l(r);h=i(a,"A",{rel:!0,href:!0,class:!0});var c=l(h);d=i(c,"IMG",{src:!0,alt:!0}),E=g(c),w=i(c,"DIV",{class:!0});var f=l(w);M=i(f,"DIV",{});var u=l(M);D=g(u),u.forEach(o),f.forEach(o),y=g(c),F=i(c,"DIV",{class:!0});var m=l(F);A=n(m,W),m.forEach(o),c.forEach(o),a.forEach(o),j=g(s),q=i(s,"DIV",{class:!0});var p=l(q);P=i(p,"DIV",{});var v=l(P);U=n(v,X),H=n(v,", "),L=n(v,Z),v.forEach(o),Y=g(p),C=g(p),N=g(p),z=g(p),_=i(p,"A",{class:!0,rel:!0,href:!0});var b=l(_);G=n(b,"Voir le film"),b.forEach(o),p.forEach(o),O=g(s),s.forEach(o),this.h()},h(){d.src!==(v=k.isUndefined(e[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[2].pk}-1.jpg`:`${e[2].thumb}`)&&c(d,"src",v),c(d,"alt",b=S.artTitre(e[2].artFr,e[2].titreFr)),T=new I(D),$=new I(null),c(w,"class","pick-title-container"),c(F,"class","duree"),c(h,"rel","prefetch"),c(h,"href",V="film/"+e[2].slug+"/"),c(h,"class","pick-img"),c(r,"class","pick-img-container"),x=new I(C),B=new I(N),R=new I(z),c(_,"class","more"),c(_,"rel","prefetch"),c(_,"href",J="film/"+e[2].slug+"/"),c(q,"class","pick-film-info"),c(t,"class","pick")},m(e,s){f(e,t,s),u(t,r),u(r,h),u(h,d),u(h,E),u(h,w),u(w,M),T.m(K,M),u(M,D),$.m(Q,M),u(h,y),u(h,F),u(F,A),u(t,j),u(t,q),u(q,P),u(P,U),u(P,H),u(P,L),u(q,Y),x.m(ee,q),u(q,C),B.m(te,q),u(q,N),R.m(re,q),u(q,z),u(q,_),u(_,G),u(t,O)},p(e,t){4&t&&d.src!==(v=k.isUndefined(e[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[2].pk}-1.jpg`:`${e[2].thumb}`)&&c(d,"src",v),4&t&&b!==(b=S.artTitre(e[2].artFr,e[2].titreFr))&&c(d,"alt",b),4&t&&K!==(K=S.artTitre(e[2].artFr,e[2].titreFr)+"")&&T.p(K),4&t&&Q!==(Q=S.beforeAfterStr("<div class='sous-titre-fr'>","</div>",e[2].sousTitreFr)+"")&&$.p(Q),4&t&&W!==(W=e[2].duree+"")&&m(A,W),4&t&&V!==(V="film/"+e[2].slug+"/")&&c(h,"href",V),4&t&&X!==(X=e[2].realisateurs+"")&&m(U,X),4&t&&Z!==(Z=e[2].annee+"")&&m(L,Z),4&t&&ee!==(ee=S.beforeAfterStr("<div>","</div>",e[2].adaptation)+"")&&x.p(ee),4&t&&te!==(te=S.beforeAfterStr("<div>Avec ",".</div>",e[2].interpretation)+"")&&B.p(te),4&t&&re!==(re=S.beforeAfterStr("<div>","</div>",e[2].shortSynopsis||e[2].synopsis)+"")&&R.p(re),4&t&&J!==(J="film/"+e[2].slug+"/")&&c(_,"href",J)},d(e){e&&o(t)}}}function z(e){let t,r=(e[4].stub||"")+"";return{c(){t=s("div"),this.h()},l(e){t=i(e,"DIV",{class:!0}),l(t).forEach(o),this.h()},h(){c(t,"class","stub"),h(t,"archived",0===e[4].countPublished)},m(e,s){f(e,t,s),t.innerHTML=r},p(e,s){2&s&&r!==(r=(e[4].stub||"")+"")&&(t.innerHTML=r),2&s&&h(t,"archived",0===e[4].countPublished)},d(e){e&&o(t)}}}function _(e){let t,r,h,d=j(e[7].dateUnpublished).format(j().year()<j(e[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"";return{c(){t=s("div"),r=a("Jusqu'au\r\n                    "),h=a(d),this.h()},l(e){t=i(e,"DIV",{class:!0});var s=l(t);r=n(s,"Jusqu'au\r\n                    "),h=n(s,d),s.forEach(o),this.h()},h(){c(t,"class","end")},m(e,s){f(e,t,s),u(t,r),u(t,h)},p(e,t){2&t&&d!==(d=j(e[7].dateUnpublished).format(j().year()<j(e[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"")&&m(h,d)},d(e){e&&o(t)}}}function G(e){let t,r;return{c(){t=s("div"),r=a("Film indisponible"),this.h()},l(e){t=i(e,"DIV",{class:!0});var s=l(t);r=n(s,"Film indisponible"),s.forEach(o),this.h()},h(){c(t,"class","end")},m(e,s){f(e,t,s),u(t,r)},p:V,d(e){e&&o(t)}}}function J(e){let t,r,d,v,$,y,F,A,V,k,j,P,U,H,L,Y,x,C,B,N,R,z,J,O=e[7].duree+"",K=`${S.artTitre(e[7].artFr,e[7].titreFr)}${S.beforeAfterStr("string"==typeof e[7].sousTitreFr?e[7].sousTitreFr[0]===e[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[7].sousTitreFr)}`,Q=e[7].realisateurs+"",W=e[7].annee+"";function X(e,t){return 3===e[7].status?G:e[7].dateUnpublished?_:void 0}L=new q({props:{age:e[7].ageMin,size:"20"}});let Z=X(e),ee=Z&&Z(e);return{c(){t=s("li"),r=s("a"),d=s("div"),v=s("img"),F=p(),A=s("div"),V=a(O),k=p(),j=s("div"),P=s("div"),H=p(),E(L.$$.fragment),Y=p(),x=s("div"),C=a(Q),B=a(", "),N=a(W),R=p(),ee&&ee.c(),this.h()},l(e){t=i(e,"LI",{class:!0});var s=l(t);r=i(s,"A",{rel:!0,href:!0});var a=l(r);d=i(a,"DIV",{class:!0});var c=l(d);v=i(c,"IMG",{loading:!0,src:!0,alt:!0}),F=g(c),A=i(c,"DIV",{class:!0});var h=l(A);V=n(h,O),h.forEach(o),c.forEach(o),k=g(a),j=i(a,"DIV",{class:!0});var f=l(j);P=i(f,"DIV",{class:!0});var u=l(P);H=g(u),w(L.$$.fragment,u),u.forEach(o),Y=g(f),x=i(f,"DIV",{});var m=l(x);C=n(m,Q),B=n(m,", "),N=n(m,W),m.forEach(o),R=g(f),ee&&ee.l(f),f.forEach(o),a.forEach(o),s.forEach(o),this.h()},h(){c(v,"loading","lazy"),v.src!==($=e[7].thumb)&&c(v,"src",$),c(v,"alt",y=S.artTitre(e[7].artFr,e[7].titreFr)),c(A,"class","duree"),c(d,"class","img-container"),U=new I(H),c(P,"class","titre"),c(j,"class","film-info"),c(r,"rel","prefetch"),c(r,"href",z="film/"+e[7].slug+"/"),c(t,"class","film"),h(t,"ispick",1===e[7].status),h(t,"archived",3===e[7].status)},m(e,s){f(e,t,s),u(t,r),u(r,d),u(d,v),u(d,F),u(d,A),u(A,V),u(r,k),u(r,j),u(j,P),U.m(K,P),u(P,H),M(L,P,null),u(j,Y),u(j,x),u(x,C),u(x,B),u(x,N),u(j,R),ee&&ee.m(j,null),J=!0},p(e,s){(!J||2&s&&v.src!==($=e[7].thumb))&&c(v,"src",$),(!J||2&s&&y!==(y=S.artTitre(e[7].artFr,e[7].titreFr)))&&c(v,"alt",y),(!J||2&s)&&O!==(O=e[7].duree+"")&&m(V,O),(!J||2&s)&&K!==(K=`${S.artTitre(e[7].artFr,e[7].titreFr)}${S.beforeAfterStr("string"==typeof e[7].sousTitreFr?e[7].sousTitreFr[0]===e[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[7].sousTitreFr)}`)&&U.p(K);const a={};2&s&&(a.age=e[7].ageMin),L.$set(a),(!J||2&s)&&Q!==(Q=e[7].realisateurs+"")&&m(C,Q),(!J||2&s)&&W!==(W=e[7].annee+"")&&m(N,W),Z===(Z=X(e))&&ee?ee.p(e,s):(ee&&ee.d(1),ee=Z&&Z(e),ee&&(ee.c(),ee.m(j,null))),(!J||2&s&&z!==(z="film/"+e[7].slug+"/"))&&c(r,"href",z),2&s&&h(t,"ispick",1===e[7].status),2&s&&h(t,"archived",3===e[7].status)},i(e){J||(b(L.$$.fragment,e),J=!0)},o(e){T(L.$$.fragment,e),J=!1},d(e){e&&o(t),D(L),ee&&ee.d()}}}function O(e){let t,r,d,E,w,M,D,y,F,I=e[4].section+"",V=e[4].stub&&z(e),k=e[4].films,S=[];for(let t=0;t<k.length;t+=1)S[t]=J(Y(e,k,t));const j=e=>T(S[e],1,1,(()=>{S[e]=null}));return{c(){t=s("div"),r=s("h2"),d=a(I),w=p(),V&&V.c(),M=p(),D=s("ul");for(let e=0;e<S.length;e+=1)S[e].c();y=p(),this.h()},l(e){t=i(e,"DIV",{});var s=l(t);r=i(s,"H2",{class:!0,id:!0});var a=l(r);d=n(a,I),a.forEach(o),w=g(s),V&&V.l(s),s.forEach(o),M=g(e),D=i(e,"UL",{class:!0});var c=l(D);for(let e=0;e<S.length;e+=1)S[e].l(c);y=g(c),c.forEach(o),this.h()},h(){c(r,"class","collection"),c(r,"id",E=e[4].slug),h(r,"archived",0===e[4].countPublished),c(D,"class","grid")},m(e,s){f(e,t,s),u(t,r),u(r,d),u(t,w),V&&V.m(t,null),f(e,M,s),f(e,D,s);for(let e=0;e<S.length;e+=1)S[e].m(D,null);u(D,y),F=!0},p(e,s){if((!F||2&s)&&I!==(I=e[4].section+"")&&m(d,I),(!F||2&s&&E!==(E=e[4].slug))&&c(r,"id",E),2&s&&h(r,"archived",0===e[4].countPublished),e[4].stub?V?V.p(e,s):(V=z(e),V.c(),V.m(t,null)):V&&(V.d(1),V=null),2&s){let t;for(k=e[4].films,t=0;t<k.length;t+=1){const r=Y(e,k,t);S[t]?(S[t].p(r,s),b(S[t],1)):(S[t]=J(r),S[t].c(),b(S[t],1),S[t].m(D,y))}for(A(),t=k.length;t<S.length;t+=1)j(t);$()}},i(e){if(!F){for(let e=0;e<k.length;e+=1)b(S[e]);F=!0}},o(e){S=S.filter(Boolean);for(let e=0;e<S.length;e+=1)T(S[e]);F=!1},d(e){e&&o(t),V&&V.d(),e&&o(M),e&&o(D),v(S,e)}}}function K(e){let t,r,a,n,h,m,F,I,V,k,S,j,q,U,Y,x;V=new P({props:{count:e[0]}});let R=e[1],z=[];for(let t=0;t<R.length;t+=1)z[t]=B(C(e,R,t));let _=e[2].length>0&&N(e),G=e[1],J=[];for(let t=0;t<G.length;t+=1)J[t]=O(L(e,G,t));const K=e=>T(J[e],1,1,(()=>{J[e]=null}));return{c(){t=s("meta"),r=s("meta"),a=s("meta"),n=s("meta"),h=p(),m=s("section"),F=s("div"),I=s("h1"),E(V.$$.fragment),k=p(),S=s("div");for(let e=0;e<z.length;e+=1)z[e].c();j=p(),_&&_.c(),q=p();for(let e=0;e<J.length;e+=1)J[e].c();this.h()},l(e){const s=y('[data-svelte="svelte-1weqqqq"]',document.head);t=i(s,"META",{property:!0,content:!0}),r=i(s,"META",{property:!0,content:!0}),a=i(s,"META",{property:!0,content:!0}),n=i(s,"META",{property:!0,content:!0}),s.forEach(o),h=g(e),m=i(e,"SECTION",{});var c=l(m);F=i(c,"DIV",{class:!0});var f=l(F);I=i(f,"H1",{class:!0});var u=l(I);w(V.$$.fragment,u),u.forEach(o),k=g(f),S=i(f,"DIV",{class:!0});var d=l(S);for(let e=0;e<z.length;e+=1)z[e].l(d);d.forEach(o),j=g(f),_&&_.l(f),q=g(f);for(let e=0;e<J.length;e+=1)J[e].l(f);f.forEach(o),c.forEach(o),this.h()},h(){document.title="\r\n    HENRI : Des films rares de la Cinémathèque française à voir en ligne\r\n  ",c(t,"property","og:url"),c(t,"content","https://www.cinematheque.fr/henri/"),c(r,"property","og:title"),c(r,"content","HENRI - Des films rares de la Cinémathèque française à voir en ligne"),c(a,"property","og:image"),c(a,"content","https://www.cinematheque.fr/henri/logo-918x480.jpg"),c(n,"property","og:description"),c(n,"content","HENRI, la plateforme VOD de la Cinémathèque française vous propose\r\n    de découvrir gratuitement en ligne des films rares issus de ses collections."),c(I,"class","main-title"),c(S,"class","collections-list"),c(F,"class","container")},m(s,i){u(document.head,t),u(document.head,r),u(document.head,a),u(document.head,n),f(s,h,i),f(s,m,i),u(m,F),u(F,I),M(V,I,null),u(F,k),u(F,S);for(let e=0;e<z.length;e+=1)z[e].m(S,null);u(F,j),_&&_.m(F,null),u(F,q);for(let e=0;e<J.length;e+=1)J[e].m(F,null);U=!0,Y||(x=d(H,"popstate",e[3]),Y=!0)},p(e,[t]){const r={};if(1&t&&(r.count=e[0]),V.$set(r),2&t){let r;for(R=e[1],r=0;r<R.length;r+=1){const s=C(e,R,r);z[r]?z[r].p(s,t):(z[r]=B(s),z[r].c(),z[r].m(S,null))}for(;r<z.length;r+=1)z[r].d(1);z.length=R.length}if(e[2].length>0?_?_.p(e,t):(_=N(e),_.c(),_.m(F,q)):_&&(_.d(1),_=null),2&t){let r;for(G=e[1],r=0;r<G.length;r+=1){const s=L(e,G,r);J[r]?(J[r].p(s,t),b(J[r],1)):(J[r]=O(s),J[r].c(),b(J[r],1),J[r].m(F,null))}for(A(),r=G.length;r<J.length;r+=1)K(r);$()}},i(e){if(!U){b(V.$$.fragment,e);for(let e=0;e<G.length;e+=1)b(J[e]);U=!0}},o(e){T(V.$$.fragment,e),J=J.filter(Boolean);for(let e=0;e<J.length;e+=1)T(J[e]);U=!1},d(e){o(t),o(r),o(a),o(n),e&&o(h),e&&o(m),D(V),v(z,e),_&&_.d(),v(J,e),Y=!1,x()}}}async function Q({params:e,query:t}){let r=await(await this.fetch("count.json")).json(),s=await this.fetch("headers.json");if(200===s.status){return s=await s.json(),{count:r,headers:s,pick:await Promise.all(k(s).map((e=>e.films)).flatten().filter((e=>1===e.status)).orderBy((e=>e.order)).map((async e=>{let t=await this.fetch(`film/${e.slug}.json`);if(t.status>=400)return null;let r=await t.json();return k({}).assign(e,k(r).pick(["section","synopsis","shortSynopsis","interpretation","adaptation"]).value()).value()})).value())}}this.error(res.status,data.message)}function W(e,t,r){j.locale("fr");let{count:s}=t,{headers:a}=t,{pick:i}=t;return e.$$set=e=>{"count"in e&&r(0,s=e.count),"headers"in e&&r(1,a=e.headers),"pick"in e&&r(2,i=e.pick)},[s,a,i,e=>{window.scrollTo({top:e.state&&e.state.top||0,behavior:"smooth"})}]}export default class extends e{constructor(e){super(),t(this,e,W,K,r,{count:0,headers:1,pick:2})}}export{Q as preload};
