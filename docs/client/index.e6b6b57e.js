import{S as t,i as e,s as r,e as s,t as a,c as i,a as l,b as n,d as o,f as c,g as h,h as f,j as u,l as d,k as m,m as p,n as g,o as v,p as E,q as b,r as w,u as M,v as T,w as D,x as $,y,z as F,H as I,A,B as V}from"./client.dc74518d.js";import{l as k,f as S}from"./format.2c429d88.js";import{d as j,P as q}from"./PictoAge.299297f1.js";import"./dayjs_custom_locale_fr.5505d054.js";import{M as P}from"./MainTitle.d87f853a.js";var U=function(t){t.preventDefault();const e=t.currentTarget,r=new URL(e.href).hash.replace("#",""),s=document.getElementById(r);window.scrollTo({top:s.offsetTop,behavior:"smooth"}),history.pushState({top:s.offsetTop},null,`#${r}`)};const{window:H}=F;function L(t,e,r){const s=t.slice();return s[4]=e[r],s}function Y(t,e,r){const s=t.slice();return s[7]=e[r],s}function x(t,e,r){const s=t.slice();return s[2]=e[r],s}function C(t,e,r){const s=t.slice();return s[4]=e[r],s}function B(t){let e,r,p,g,v,E,b=t[4].section+"";return{c(){e=s("a"),r=s("span"),p=a(b),this.h()},l(t){e=i(t,"A",{href:!0});var s=l(e);r=i(s,"SPAN",{});var a=l(r);p=n(a,b),a.forEach(o),s.forEach(o),this.h()},h(){c(e,"href",g="#"+t[4].slug),h(e,"archived",0===t[4].countPublished)},m(t,s){f(t,e,s),u(e,r),u(r,p),v||(E=d(e,"click",U),v=!0)},p(t,r){2&r&&b!==(b=t[4].section+"")&&m(p,b),2&r&&g!==(g="#"+t[4].slug)&&c(e,"href",g),2&r&&h(e,"archived",0===t[4].countPublished)},d(t){t&&o(e),v=!1,E()}}}function N(t){let e,r,h,d,E,b,w,M=1===t[2].length?"Le film":"Les films",T=j(t[2][0].datePublished).format("dddd D MMMM")+"",D=t[2],$=[];for(let e=0;e<D.length;e+=1)$[e]=R(x(t,D,e));return{c(){e=s("div"),r=s("div"),h=s("h2"),d=a(M),E=a("\r\n            du\r\n            "),b=a(T),w=p();for(let t=0;t<$.length;t+=1)$[t].c();this.h()},l(t){e=i(t,"DIV",{class:!0});var s=l(e);r=i(s,"DIV",{class:!0});var a=l(r);h=i(a,"H2",{});var c=l(h);d=n(c,M),E=n(c,"\r\n            du\r\n            "),b=n(c,T),c.forEach(o),a.forEach(o),w=g(s);for(let t=0;t<$.length;t+=1)$[t].l(s);s.forEach(o),this.h()},h(){c(r,"class","pick-label"),c(e,"class","pick-container")},m(t,s){f(t,e,s),u(e,r),u(r,h),u(h,d),u(h,E),u(h,b),u(e,w);for(let t=0;t<$.length;t+=1)$[t].m(e,null)},p(t,r){if(4&r&&M!==(M=1===t[2].length?"Le film":"Les films")&&m(d,M),4&r&&T!==(T=j(t[2][0].datePublished).format("dddd D MMMM")+"")&&m(b,T),4&r){let s;for(D=t[2],s=0;s<D.length;s+=1){const a=x(t,D,s);$[s]?$[s].p(a,r):($[s]=R(a),$[s].c(),$[s].m(e,null))}for(;s<$.length;s+=1)$[s].d(1);$.length=D.length}},d(t){t&&o(e),v($,t)}}}function R(t){let e,r,h,d,v,E,b,w,M,T,D,$,y,F,A,V,j,q,P,U,H,L,Y,x,C,B,N,R,z,_,G,J,O,K=S.artTitre(t[2].artFr,t[2].titreFr)+"",Q=S.beforeAfterStr("<div class='sous-titre-fr'>","</div>",t[2].sousTitreFr)+"",W=t[2].duree+"",X=t[2].realisateurs+"",Z=t[2].annee+"",tt=S.beforeAfterStr("<div>","</div>",t[2].adaptation)+"",et=S.beforeAfterStr("<div>Avec ",".</div>",t[2].interpretation)+"",rt=S.beforeAfterStr("<div>","</div>",t[2].shortSynopsis||t[2].synopsis)+"";return{c(){e=s("div"),r=s("div"),h=s("a"),d=s("img"),b=p(),w=s("div"),M=s("div"),D=p(),y=p(),F=s("div"),A=a(W),j=p(),q=s("div"),P=s("div"),U=a(X),H=a(", "),L=a(Z),Y=p(),C=p(),N=p(),z=p(),_=s("a"),G=a("Voir le film"),O=p(),this.h()},l(t){e=i(t,"DIV",{class:!0});var s=l(e);r=i(s,"DIV",{class:!0});var a=l(r);h=i(a,"A",{rel:!0,href:!0,class:!0});var c=l(h);d=i(c,"IMG",{src:!0,alt:!0}),b=g(c),w=i(c,"DIV",{class:!0});var f=l(w);M=i(f,"DIV",{});var u=l(M);D=g(u),u.forEach(o),f.forEach(o),y=g(c),F=i(c,"DIV",{class:!0});var m=l(F);A=n(m,W),m.forEach(o),c.forEach(o),a.forEach(o),j=g(s),q=i(s,"DIV",{class:!0});var p=l(q);P=i(p,"DIV",{});var v=l(P);U=n(v,X),H=n(v,", "),L=n(v,Z),v.forEach(o),Y=g(p),C=g(p),N=g(p),z=g(p),_=i(p,"A",{class:!0,rel:!0,href:!0});var E=l(_);G=n(E,"Voir le film"),E.forEach(o),p.forEach(o),O=g(s),s.forEach(o),this.h()},h(){d.src!==(v=k.isUndefined(t[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${t[2].pk}-1.jpg`:`${t[2].thumb}`)&&c(d,"src",v),c(d,"alt",E=S.artTitre(t[2].artFr,t[2].titreFr)),T=new I(D),$=new I(null),c(w,"class","pick-title-container"),c(F,"class","duree"),c(h,"rel","prefetch"),c(h,"href",V="film/"+t[2].slug+"/"),c(h,"class","pick-img"),c(r,"class","pick-img-container"),x=new I(C),B=new I(N),R=new I(z),c(_,"class","more"),c(_,"rel","prefetch"),c(_,"href",J="film/"+t[2].slug+"/"),c(q,"class","pick-film-info"),c(e,"class","pick")},m(t,s){f(t,e,s),u(e,r),u(r,h),u(h,d),u(h,b),u(h,w),u(w,M),T.m(K,M),u(M,D),$.m(Q,M),u(h,y),u(h,F),u(F,A),u(e,j),u(e,q),u(q,P),u(P,U),u(P,H),u(P,L),u(q,Y),x.m(tt,q),u(q,C),B.m(et,q),u(q,N),R.m(rt,q),u(q,z),u(q,_),u(_,G),u(e,O)},p(t,e){4&e&&d.src!==(v=k.isUndefined(t[2].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${t[2].pk}-1.jpg`:`${t[2].thumb}`)&&c(d,"src",v),4&e&&E!==(E=S.artTitre(t[2].artFr,t[2].titreFr))&&c(d,"alt",E),4&e&&K!==(K=S.artTitre(t[2].artFr,t[2].titreFr)+"")&&T.p(K),4&e&&Q!==(Q=S.beforeAfterStr("<div class='sous-titre-fr'>","</div>",t[2].sousTitreFr)+"")&&$.p(Q),4&e&&W!==(W=t[2].duree+"")&&m(A,W),4&e&&V!==(V="film/"+t[2].slug+"/")&&c(h,"href",V),4&e&&X!==(X=t[2].realisateurs+"")&&m(U,X),4&e&&Z!==(Z=t[2].annee+"")&&m(L,Z),4&e&&tt!==(tt=S.beforeAfterStr("<div>","</div>",t[2].adaptation)+"")&&x.p(tt),4&e&&et!==(et=S.beforeAfterStr("<div>Avec ",".</div>",t[2].interpretation)+"")&&B.p(et),4&e&&rt!==(rt=S.beforeAfterStr("<div>","</div>",t[2].shortSynopsis||t[2].synopsis)+"")&&R.p(rt),4&e&&J!==(J="film/"+t[2].slug+"/")&&c(_,"href",J)},d(t){t&&o(e)}}}function z(t){let e,r=(t[4].stub||"")+"";return{c(){e=s("div"),this.h()},l(t){e=i(t,"DIV",{class:!0}),l(e).forEach(o),this.h()},h(){c(e,"class","stub"),h(e,"archived",0===t[4].countPublished)},m(t,s){f(t,e,s),e.innerHTML=r},p(t,s){2&s&&r!==(r=(t[4].stub||"")+"")&&(e.innerHTML=r),2&s&&h(e,"archived",0===t[4].countPublished)},d(t){t&&o(e)}}}function _(t){let e,r,h,d=j(t[7].dateUnpublished).format(j().year()<j(t[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"";return{c(){e=s("div"),r=a("Jusqu'au\r\n                    "),h=a(d),this.h()},l(t){e=i(t,"DIV",{class:!0});var s=l(e);r=n(s,"Jusqu'au\r\n                    "),h=n(s,d),s.forEach(o),this.h()},h(){c(e,"class","end")},m(t,s){f(t,e,s),u(e,r),u(e,h)},p(t,e){2&e&&d!==(d=j(t[7].dateUnpublished).format(j().year()<j(t[7].dateUnpublished).year()?"D MMM YYYY":"D MMM")+"")&&m(h,d)},d(t){t&&o(e)}}}function G(t){let e,r;return{c(){e=s("div"),r=a("Film indisponible"),this.h()},l(t){e=i(t,"DIV",{class:!0});var s=l(e);r=n(s,"Film indisponible"),s.forEach(o),this.h()},h(){c(e,"class","end")},m(t,s){f(t,e,s),u(e,r)},p:V,d(t){t&&o(e)}}}function J(t){let e,r,d,v,$,y,F,A,V,k,j,P,U,H,L,Y,x,C,B,N,R,z,J,O=t[7].duree+"",K=`${S.artTitre(t[7].artFr,t[7].titreFr)}${S.beforeAfterStr("string"==typeof t[7].sousTitreFr?t[7].sousTitreFr[0]===t[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",t[7].sousTitreFr)}`,Q=t[7].realisateurs+"",W=t[7].annee+"";function X(t,e){return 3===t[7].status?G:t[7].dateUnpublished?_:void 0}L=new q({props:{age:t[7].ageMin,size:"20"}});let Z=X(t),tt=Z&&Z(t);return{c(){e=s("li"),r=s("a"),d=s("div"),v=s("img"),F=p(),A=s("div"),V=a(O),k=p(),j=s("div"),P=s("div"),H=p(),b(L.$$.fragment),Y=p(),x=s("div"),C=a(Q),B=a(", "),N=a(W),R=p(),tt&&tt.c(),this.h()},l(t){e=i(t,"LI",{class:!0});var s=l(e);r=i(s,"A",{rel:!0,href:!0});var a=l(r);d=i(a,"DIV",{class:!0});var c=l(d);v=i(c,"IMG",{loading:!0,src:!0,alt:!0}),F=g(c),A=i(c,"DIV",{class:!0});var h=l(A);V=n(h,O),h.forEach(o),c.forEach(o),k=g(a),j=i(a,"DIV",{class:!0});var f=l(j);P=i(f,"DIV",{class:!0});var u=l(P);H=g(u),w(L.$$.fragment,u),u.forEach(o),Y=g(f),x=i(f,"DIV",{});var m=l(x);C=n(m,Q),B=n(m,", "),N=n(m,W),m.forEach(o),R=g(f),tt&&tt.l(f),f.forEach(o),a.forEach(o),s.forEach(o),this.h()},h(){c(v,"loading","lazy"),v.src!==($=t[7].thumb)&&c(v,"src",$),c(v,"alt",y=S.artTitre(t[7].artFr,t[7].titreFr)),c(A,"class","duree"),c(d,"class","img-container"),U=new I(H),c(P,"class","titre"),c(j,"class","film-info"),c(r,"rel","prefetch"),c(r,"href",z="film/"+t[7].slug+"/"),c(e,"class","film"),h(e,"ispick",1===t[7].status),h(e,"archived",3===t[7].status)},m(t,s){f(t,e,s),u(e,r),u(r,d),u(d,v),u(d,F),u(d,A),u(A,V),u(r,k),u(r,j),u(j,P),U.m(K,P),u(P,H),M(L,P,null),u(j,Y),u(j,x),u(x,C),u(x,B),u(x,N),u(j,R),tt&&tt.m(j,null),J=!0},p(t,s){(!J||2&s&&v.src!==($=t[7].thumb))&&c(v,"src",$),(!J||2&s&&y!==(y=S.artTitre(t[7].artFr,t[7].titreFr)))&&c(v,"alt",y),(!J||2&s)&&O!==(O=t[7].duree+"")&&m(V,O),(!J||2&s)&&K!==(K=`${S.artTitre(t[7].artFr,t[7].titreFr)}${S.beforeAfterStr("string"==typeof t[7].sousTitreFr?t[7].sousTitreFr[0]===t[7].sousTitreFr[0].toUpperCase()?". ":" ":"","",t[7].sousTitreFr)}`)&&U.p(K);const a={};2&s&&(a.age=t[7].ageMin),L.$set(a),(!J||2&s)&&Q!==(Q=t[7].realisateurs+"")&&m(C,Q),(!J||2&s)&&W!==(W=t[7].annee+"")&&m(N,W),Z===(Z=X(t))&&tt?tt.p(t,s):(tt&&tt.d(1),tt=Z&&Z(t),tt&&(tt.c(),tt.m(j,null))),(!J||2&s&&z!==(z="film/"+t[7].slug+"/"))&&c(r,"href",z),2&s&&h(e,"ispick",1===t[7].status),2&s&&h(e,"archived",3===t[7].status)},i(t){J||(E(L.$$.fragment,t),J=!0)},o(t){T(L.$$.fragment,t),J=!1},d(t){t&&o(e),D(L),tt&&tt.d()}}}function O(t){let e,r,d,b,w,M,D,y,F,I=t[4].section+"",V=t[4].stub&&z(t),k=t[4].films,S=[];for(let e=0;e<k.length;e+=1)S[e]=J(Y(t,k,e));const j=t=>T(S[t],1,1,(()=>{S[t]=null}));return{c(){e=s("div"),r=s("h2"),d=a(I),w=p(),V&&V.c(),M=p(),D=s("ul");for(let t=0;t<S.length;t+=1)S[t].c();y=p(),this.h()},l(t){e=i(t,"DIV",{});var s=l(e);r=i(s,"H2",{class:!0,id:!0});var a=l(r);d=n(a,I),a.forEach(o),w=g(s),V&&V.l(s),s.forEach(o),M=g(t),D=i(t,"UL",{class:!0});var c=l(D);for(let t=0;t<S.length;t+=1)S[t].l(c);y=g(c),c.forEach(o),this.h()},h(){c(r,"class","collection"),c(r,"id",b=t[4].slug),h(r,"archived",0===t[4].countPublished),c(D,"class","grid")},m(t,s){f(t,e,s),u(e,r),u(r,d),u(e,w),V&&V.m(e,null),f(t,M,s),f(t,D,s);for(let t=0;t<S.length;t+=1)S[t].m(D,null);u(D,y),F=!0},p(t,s){if((!F||2&s)&&I!==(I=t[4].section+"")&&m(d,I),(!F||2&s&&b!==(b=t[4].slug))&&c(r,"id",b),2&s&&h(r,"archived",0===t[4].countPublished),t[4].stub?V?V.p(t,s):(V=z(t),V.c(),V.m(e,null)):V&&(V.d(1),V=null),2&s){let e;for(k=t[4].films,e=0;e<k.length;e+=1){const r=Y(t,k,e);S[e]?(S[e].p(r,s),E(S[e],1)):(S[e]=J(r),S[e].c(),E(S[e],1),S[e].m(D,y))}for(A(),e=k.length;e<S.length;e+=1)j(e);$()}},i(t){if(!F){for(let t=0;t<k.length;t+=1)E(S[t]);F=!0}},o(t){S=S.filter(Boolean);for(let t=0;t<S.length;t+=1)T(S[t]);F=!1},d(t){t&&o(e),V&&V.d(),t&&o(M),t&&o(D),v(S,t)}}}function K(t){let e,r,a,n,h,m,F,I,V,k,S,j,q,U,Y,x;V=new P({props:{count:t[0]}});let R=t[1],z=[];for(let e=0;e<R.length;e+=1)z[e]=B(C(t,R,e));let _=t[2].length>0&&N(t),G=t[1],J=[];for(let e=0;e<G.length;e+=1)J[e]=O(L(t,G,e));const K=t=>T(J[t],1,1,(()=>{J[t]=null}));return{c(){e=s("meta"),r=s("meta"),a=s("meta"),n=s("meta"),h=p(),m=s("section"),F=s("div"),I=s("h1"),b(V.$$.fragment),k=p(),S=s("div");for(let t=0;t<z.length;t+=1)z[t].c();j=p(),_&&_.c(),q=p();for(let t=0;t<J.length;t+=1)J[t].c();this.h()},l(t){const s=y('[data-svelte="svelte-1weqqqq"]',document.head);e=i(s,"META",{property:!0,content:!0}),r=i(s,"META",{property:!0,content:!0}),a=i(s,"META",{property:!0,content:!0}),n=i(s,"META",{property:!0,content:!0}),s.forEach(o),h=g(t),m=i(t,"SECTION",{});var c=l(m);F=i(c,"DIV",{class:!0});var f=l(F);I=i(f,"H1",{class:!0});var u=l(I);w(V.$$.fragment,u),u.forEach(o),k=g(f),S=i(f,"DIV",{class:!0});var d=l(S);for(let t=0;t<z.length;t+=1)z[t].l(d);d.forEach(o),j=g(f),_&&_.l(f),q=g(f);for(let t=0;t<J.length;t+=1)J[t].l(f);f.forEach(o),c.forEach(o),this.h()},h(){document.title="\r\n    HENRI : Des films rares de la Cinémathèque française à voir en ligne\r\n  ",c(e,"property","og:url"),c(e,"content","https://www.cinematheque.fr/henri/"),c(r,"property","og:title"),c(r,"content","HENRI - Des films rares de la Cinémathèque française à voir en ligne"),c(a,"property","og:image"),c(a,"content","https://www.cinematheque.fr/henri/logo-918x480.jpg"),c(n,"property","og:description"),c(n,"content","HENRI, la plateforme VOD de la Cinémathèque française vous propose\r\n    de découvrir gratuitement en ligne des films rares issus de ses collections."),c(I,"class","main-title"),c(S,"class","collections-list"),c(F,"class","container")},m(s,i){u(document.head,e),u(document.head,r),u(document.head,a),u(document.head,n),f(s,h,i),f(s,m,i),u(m,F),u(F,I),M(V,I,null),u(F,k),u(F,S);for(let t=0;t<z.length;t+=1)z[t].m(S,null);u(F,j),_&&_.m(F,null),u(F,q);for(let t=0;t<J.length;t+=1)J[t].m(F,null);U=!0,Y||(x=d(H,"popstate",t[3]),Y=!0)},p(t,[e]){const r={};if(1&e&&(r.count=t[0]),V.$set(r),2&e){let r;for(R=t[1],r=0;r<R.length;r+=1){const s=C(t,R,r);z[r]?z[r].p(s,e):(z[r]=B(s),z[r].c(),z[r].m(S,null))}for(;r<z.length;r+=1)z[r].d(1);z.length=R.length}if(t[2].length>0?_?_.p(t,e):(_=N(t),_.c(),_.m(F,q)):_&&(_.d(1),_=null),2&e){let r;for(G=t[1],r=0;r<G.length;r+=1){const s=L(t,G,r);J[r]?(J[r].p(s,e),E(J[r],1)):(J[r]=O(s),J[r].c(),E(J[r],1),J[r].m(F,null))}for(A(),r=G.length;r<J.length;r+=1)K(r);$()}},i(t){if(!U){E(V.$$.fragment,t);for(let t=0;t<G.length;t+=1)E(J[t]);U=!0}},o(t){T(V.$$.fragment,t),J=J.filter(Boolean);for(let t=0;t<J.length;t+=1)T(J[t]);U=!1},d(t){o(e),o(r),o(a),o(n),t&&o(h),t&&o(m),D(V),v(z,t),_&&_.d(),v(J,t),Y=!1,x()}}}async function Q({params:t,query:e}){let r=await(await this.fetch("count.json")).json(),s=await this.fetch("headers.json");if(200===s.status){return s=await s.json(),{count:r,headers:s,pick:await Promise.all(k(s).map((t=>t.films)).flatten().filter((t=>1===t.status)).orderBy((t=>t.order)).map((async t=>{let e=await this.fetch(`film/${t.slug}.json`);if(e.status>=400)return null;let r=await e.json();return k({}).assign(t,k(r).pick(["section","synopsis","shortSynopsis","interpretation","adaptation"]).value()).value()})).value())}}this.error(res.status,data.message)}function W(t,e,r){j.locale("fr");let{count:s}=e,{headers:a}=e,{pick:i}=e;return t.$$set=t=>{"count"in t&&r(0,s=t.count),"headers"in t&&r(1,a=t.headers),"pick"in t&&r(2,i=t.pick)},[s,a,i,t=>{window.scrollTo({top:t.state&&t.state.top||0,behavior:"smooth"})}]}export default class extends t{constructor(t){super(),e(this,t,W,K,r,{count:0,headers:1,pick:2})}}export{Q as preload};
