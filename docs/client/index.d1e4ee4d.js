import{S as e,i as r,s as t,e as s,t as a,a as i,c as l,b as n,d as c,f as o,g as h,h as d,j as f,k as u,l as m,m as p,n as v,o as g,q as E,p as F,r as D,u as I,v as M,w,H as V,x as b}from"./client.55017b05.js";import{l as T,d as y,f as A,a as k}from"./format.eaaaff95.js";import{M as $}from"./MainTitle.4388185e.js";function H(e,r,t){const s=e.slice();return s[5]=r[t],s}function q(e,r,t){const s=e.slice();return s[2]=r[t],s}function j(e,r,t){const s=e.slice();return s[1]=r[t],s}function L(e,r,t){const s=e.slice();return s[2]=r[t],s}function U(e){let r,t,v,g,E=e[2].name+"";return{c(){r=s("a"),t=a(E),v=i(),this.h()},l(e){r=l(e,"A",{href:!0});var s=n(r);t=c(s,E),v=o(s),s.forEach(h),this.h()},h(){d(r,"href",g="#"+e[2].slug),f(r,"archived",e[2].isArchived)},m(e,s){u(e,r,s),m(r,t),m(r,v)},p(e,s){1&s&&E!==(E=e[2].name+"")&&p(t,E),1&s&&g!==(g="#"+e[2].slug)&&d(r,"href",g),1&s&&f(r,"archived",e[2].isArchived)},d(e){e&&h(r)}}}function x(e){let r,t,f,g,E,F,D,I=1===e[1].length?"Le film":"Les films",M=y(e[1][0].datePublished).format("dddd D MMMM")+"",w=e[1],V=[];for(let r=0;r<w.length;r+=1)V[r]=C(j(e,w,r));return{c(){r=s("div"),t=s("div"),f=s("h2"),g=a(I),E=a("\r\n            du\r\n            "),F=a(M),D=i();for(let e=0;e<V.length;e+=1)V[e].c();this.h()},l(e){r=l(e,"DIV",{class:!0});var s=n(r);t=l(s,"DIV",{class:!0});var a=n(t);f=l(a,"H2",{});var i=n(f);g=c(i,I),E=c(i,"\r\n            du\r\n            "),F=c(i,M),i.forEach(h),a.forEach(h),D=o(s);for(let e=0;e<V.length;e+=1)V[e].l(s);s.forEach(h),this.h()},h(){d(t,"class","pick-label"),d(r,"class","pick-container")},m(e,s){u(e,r,s),m(r,t),m(t,f),m(f,g),m(f,E),m(f,F),m(r,D);for(let e=0;e<V.length;e+=1)V[e].m(r,null)},p(e,t){if(2&t&&I!==(I=1===e[1].length?"Le film":"Les films")&&p(g,I),2&t&&M!==(M=y(e[1][0].datePublished).format("dddd D MMMM")+"")&&p(F,M),2&t){let s;for(w=e[1],s=0;s<w.length;s+=1){const a=j(e,w,s);V[s]?V[s].p(a,t):(V[s]=C(a),V[s].c(),V[s].m(r,null))}for(;s<V.length;s+=1)V[s].d(1);V.length=w.length}},d(e){e&&h(r),v(V,e)}}}function C(e){let r,t,f,v,g,E,F,D,I,M,w,b,y,$,H,q,j,L,U,x,C,N,P,S,R,G,J,O,z,B,K,Q,W,X,Y,Z=A(e[1].artFr,e[1].titreFr)+"",_=k("<div class='sous-titre-fr'>","</div>",e[1].sousTitreFr)+"",ee=e[1].duree+"",re=e[1].realisateurs+"",te=e[1].annee+"",se=k("<div>","</div>",e[1].adaptation)+"",ae=k("<div>Avec ",".</div>",e[1].interpretation)+"",ie=k("<div>","</div>",e[1].shortSynopsis||e[1].synopsis)+"",le=k('<div class="rem">',"</div>",e[1].remarque)+"";return{c(){r=s("div"),t=s("div"),f=s("a"),v=s("img"),F=i(),D=s("div"),I=s("div"),w=i(),y=i(),$=s("div"),H=a(ee),j=i(),L=s("div"),U=s("div"),x=a(re),C=a(", "),N=a(te),P=i(),R=i(),J=i(),z=i(),K=i(),Q=s("a"),W=a("Voir le film"),Y=i(),this.h()},l(e){r=l(e,"DIV",{class:!0});var s=n(r);t=l(s,"DIV",{class:!0});var a=n(t);f=l(a,"A",{rel:!0,href:!0,class:!0});var i=n(f);v=l(i,"IMG",{src:!0,alt:!0}),F=o(i),D=l(i,"DIV",{class:!0});var d=n(D);I=l(d,"DIV",{});var u=n(I);w=o(u),u.forEach(h),d.forEach(h),y=o(i),$=l(i,"DIV",{class:!0});var m=n($);H=c(m,ee),m.forEach(h),i.forEach(h),a.forEach(h),j=o(s),L=l(s,"DIV",{class:!0});var p=n(L);U=l(p,"DIV",{});var g=n(U);x=c(g,re),C=c(g,", "),N=c(g,te),g.forEach(h),P=o(p),R=o(p),J=o(p),z=o(p),K=o(p),Q=l(p,"A",{class:!0,rel:!0,href:!0});var E=n(Q);W=c(E,"Voir le film"),E.forEach(h),p.forEach(h),Y=o(s),s.forEach(h),this.h()},h(){v.src!==(g=T.isUndefined(e[1].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[1].pk}-1.jpg`:""+e[1].thumb)&&d(v,"src",g),d(v,"alt",E=A(e[1].artFr,e[1].titreFr)),M=new V(w),b=new V(null),d(D,"class","pick-title-container"),d($,"class","duree"),d(f,"rel","prefetch"),d(f,"href",q="film/"+e[1].slug+"/"),d(f,"class","pick-img"),d(t,"class","pick-img-container"),S=new V(R),G=new V(J),O=new V(z),B=new V(K),d(Q,"class","more"),d(Q,"rel","prefetch"),d(Q,"href",X="film/"+e[1].slug+"/"),d(L,"class","pick-film-info"),d(r,"class","pick")},m(e,s){u(e,r,s),m(r,t),m(t,f),m(f,v),m(f,F),m(f,D),m(D,I),M.m(Z,I),m(I,w),b.m(_,I),m(f,y),m(f,$),m($,H),m(r,j),m(r,L),m(L,U),m(U,x),m(U,C),m(U,N),m(L,P),S.m(se,L),m(L,R),G.m(ae,L),m(L,J),O.m(ie,L),m(L,z),B.m(le,L),m(L,K),m(L,Q),m(Q,W),m(r,Y)},p(e,r){2&r&&v.src!==(g=T.isUndefined(e[1].thumb)?`https://www.cinematheque.fr/catalogues/restaurations-tirages-images/images/film/533x400/${e[1].pk}-1.jpg`:""+e[1].thumb)&&d(v,"src",g),2&r&&E!==(E=A(e[1].artFr,e[1].titreFr))&&d(v,"alt",E),2&r&&Z!==(Z=A(e[1].artFr,e[1].titreFr)+"")&&M.p(Z),2&r&&_!==(_=k("<div class='sous-titre-fr'>","</div>",e[1].sousTitreFr)+"")&&b.p(_),2&r&&ee!==(ee=e[1].duree+"")&&p(H,ee),2&r&&q!==(q="film/"+e[1].slug+"/")&&d(f,"href",q),2&r&&re!==(re=e[1].realisateurs+"")&&p(x,re),2&r&&te!==(te=e[1].annee+"")&&p(N,te),2&r&&se!==(se=k("<div>","</div>",e[1].adaptation)+"")&&S.p(se),2&r&&ae!==(ae=k("<div>Avec ",".</div>",e[1].interpretation)+"")&&G.p(ae),2&r&&ie!==(ie=k("<div>","</div>",e[1].shortSynopsis||e[1].synopsis)+"")&&O.p(ie),2&r&&le!==(le=k('<div class="rem">',"</div>",e[1].remarque)+"")&&B.p(le),2&r&&X!==(X="film/"+e[1].slug+"/")&&d(Q,"href",X)},d(e){e&&h(r)}}}function N(e){let r,t=e[2].header.stub+"";return{c(){r=s("div"),this.h()},l(e){r=l(e,"DIV",{class:!0}),n(r).forEach(h),this.h()},h(){d(r,"class","stub"),f(r,"archived",e[2].isArchived)},m(e,s){u(e,r,s),r.innerHTML=t},p(e,s){1&s&&t!==(t=e[2].header.stub+"")&&(r.innerHTML=t),1&s&&f(r,"archived",e[2].isArchived)},d(e){e&&h(r)}}}function P(e){let r,t,i,o=y(e[5].dateUnpublished).format("D MMM")+"";return{c(){r=s("div"),t=a("Jusqu'au\r\n                      "),i=a(o),this.h()},l(e){r=l(e,"DIV",{class:!0});var s=n(r);t=c(s,"Jusqu'au\r\n                      "),i=c(s,o),s.forEach(h),this.h()},h(){d(r,"class","end")},m(e,s){u(e,r,s),m(r,t),m(r,i)},p(e,r){1&r&&o!==(o=y(e[5].dateUnpublished).format("D MMM")+"")&&p(i,o)},d(e){e&&h(r)}}}function S(e){let r,t;return{c(){r=s("div"),t=a("Film indisponible"),this.h()},l(e){r=l(e,"DIV",{class:!0});var s=n(r);t=c(s,"Film indisponible"),s.forEach(h),this.h()},h(){d(r,"class","end")},m(e,s){u(e,r,s),m(r,t)},p:b,d(e){e&&h(r)}}}function R(e){let r,t,v,g,E,F,D,I,M,w,V,b,T,y,$,H,q,j,L,U,x=e[5].duree+"",C=`${A(e[5].artFr,e[5].titreFr)}${k("string"==typeof e[5].sousTitreFr?e[5].sousTitreFr[0]===e[5].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[5].sousTitreFr)}`,N=e[5].realisateurs+"",R=e[5].annee+"";function G(e,r){return 3===e[5].status?S:e[5].dateUnpublished?P:void 0}let J=G(e),O=J&&J(e);return{c(){r=s("li"),t=s("a"),v=s("div"),g=s("img"),D=i(),I=s("div"),M=a(x),w=i(),V=s("div"),b=s("div"),T=i(),y=s("div"),$=a(N),H=a(", "),q=a(R),j=i(),O&&O.c(),U=i(),this.h()},l(e){r=l(e,"LI",{class:!0});var s=n(r);t=l(s,"A",{rel:!0,href:!0});var a=n(t);v=l(a,"DIV",{class:!0});var i=n(v);g=l(i,"IMG",{loading:!0,src:!0,alt:!0}),D=o(i),I=l(i,"DIV",{class:!0});var d=n(I);M=c(d,x),d.forEach(h),i.forEach(h),w=o(a),V=l(a,"DIV",{class:!0});var f=n(V);b=l(f,"DIV",{class:!0}),n(b).forEach(h),T=o(f),y=l(f,"DIV",{});var u=n(y);$=c(u,N),H=c(u,", "),q=c(u,R),u.forEach(h),j=o(f),O&&O.l(f),f.forEach(h),a.forEach(h),U=o(s),s.forEach(h),this.h()},h(){d(g,"loading","lazy"),g.src!==(E=e[5].thumb)&&d(g,"src",E),d(g,"alt",F=A(e[5].artFr,e[5].titreFr)),d(I,"class","duree"),d(v,"class","img-container"),d(b,"class","titre"),d(V,"class","film-info"),d(t,"rel","prefetch"),d(t,"href",L="film/"+e[5].slug+"/"),d(r,"class","film"),f(r,"archived",e[5].isArchived)},m(e,s){u(e,r,s),m(r,t),m(t,v),m(v,g),m(v,D),m(v,I),m(I,M),m(t,w),m(t,V),m(V,b),b.innerHTML=C,m(V,T),m(V,y),m(y,$),m(y,H),m(y,q),m(V,j),O&&O.m(V,null),m(r,U)},p(e,s){1&s&&g.src!==(E=e[5].thumb)&&d(g,"src",E),1&s&&F!==(F=A(e[5].artFr,e[5].titreFr))&&d(g,"alt",F),1&s&&x!==(x=e[5].duree+"")&&p(M,x),1&s&&C!==(C=`${A(e[5].artFr,e[5].titreFr)}${k("string"==typeof e[5].sousTitreFr?e[5].sousTitreFr[0]===e[5].sousTitreFr[0].toUpperCase()?". ":" ":"","",e[5].sousTitreFr)}`)&&(b.innerHTML=C),1&s&&N!==(N=e[5].realisateurs+"")&&p($,N),1&s&&R!==(R=e[5].annee+"")&&p(q,R),J===(J=G(e))&&O?O.p(e,s):(O&&O.d(1),O=J&&J(e),O&&(O.c(),O.m(V,null))),1&s&&L!==(L="film/"+e[5].slug+"/")&&d(t,"href",L),1&s&&f(r,"archived",e[5].isArchived)},d(e){e&&h(r),O&&O.d()}}}function G(e){let r,t,g,E,F,D,I,M,w=e[2].name+"",V=e[2].header.stub&&N(e),b=e[2].films,T=[];for(let r=0;r<b.length;r+=1)T[r]=R(H(e,b,r));return{c(){r=s("div"),t=s("h2"),g=a(w),F=i(),V&&V.c(),D=i(),I=s("ul");for(let e=0;e<T.length;e+=1)T[e].c();M=i(),this.h()},l(e){r=l(e,"DIV",{});var s=n(r);t=l(s,"H2",{class:!0,id:!0});var a=n(t);g=c(a,w),a.forEach(h),F=o(s),V&&V.l(s),D=o(s),I=l(s,"UL",{class:!0});var i=n(I);for(let e=0;e<T.length;e+=1)T[e].l(i);i.forEach(h),M=o(s),s.forEach(h),this.h()},h(){d(t,"class","collection"),d(t,"id",E=e[2].slug),f(t,"archived",e[2].isArchived),d(I,"class","grid")},m(e,s){u(e,r,s),m(r,t),m(t,g),m(r,F),V&&V.m(r,null),m(r,D),m(r,I);for(let e=0;e<T.length;e+=1)T[e].m(I,null);m(r,M)},p(e,s){if(1&s&&w!==(w=e[2].name+"")&&p(g,w),1&s&&E!==(E=e[2].slug)&&d(t,"id",E),1&s&&f(t,"archived",e[2].isArchived),e[2].header.stub?V?V.p(e,s):(V=N(e),V.c(),V.m(r,D)):V&&(V.d(1),V=null),1&s){let r;for(b=e[2].films,r=0;r<b.length;r+=1){const t=H(e,b,r);T[r]?T[r].p(t,s):(T[r]=R(t),T[r].c(),T[r].m(I,null))}for(;r<T.length;r+=1)T[r].d(1);T.length=b.length}},d(e){e&&h(r),V&&V.d(),v(T,e)}}}function J(e){let r,t,a,c,f,p,V,b,T,y,A,k,H;b=new $({});let j=e[0],C=[];for(let r=0;r<j.length;r+=1)C[r]=U(L(e,j,r));let N=e[1].length>0&&x(e),P=e[0],S=[];for(let r=0;r<P.length;r+=1)S[r]=G(q(e,P,r));return{c(){r=s("meta"),t=s("meta"),a=s("meta"),c=s("meta"),f=i(),p=s("section"),V=s("div"),g(b.$$.fragment),T=i(),y=s("div");for(let e=0;e<C.length;e+=1)C[e].c();A=i(),N&&N.c(),k=i();for(let e=0;e<S.length;e+=1)S[e].c();this.h()},l(e){const s=E('[data-svelte="svelte-2kporm"]',document.head);r=l(s,"META",{property:!0,content:!0}),t=l(s,"META",{property:!0,content:!0}),a=l(s,"META",{property:!0,content:!0}),c=l(s,"META",{property:!0,content:!0}),s.forEach(h),f=o(e),p=l(e,"SECTION",{});var i=n(p);V=l(i,"DIV",{class:!0});var d=n(V);F(b.$$.fragment,d),T=o(d),y=l(d,"DIV",{class:!0});var u=n(y);for(let e=0;e<C.length;e+=1)C[e].l(u);u.forEach(h),A=o(d),N&&N.l(d),k=o(d);for(let e=0;e<S.length;e+=1)S[e].l(d);d.forEach(h),i.forEach(h),this.h()},h(){document.title="\r\n    HENRI : Des films rares de la Cinémathèque française à voir en ligne\r\n  ",d(r,"property","og:url"),d(r,"content","https://www.cinematheque.fr/henri/"),d(t,"property","og:title"),d(t,"content","HENRI - Des films rares de la Cinémathèque française à voir en\r\n    ligne"),d(a,"property","og:image"),d(a,"content","https://www.cinematheque.fr/henri/logo-918x480.jpg"),d(c,"property","og:description"),d(c,"content","HENRI, la plateforme VOD de la Cinémathèque française vous propose\r\n    de découvrir gratuitement en ligne des films rares issus de ses collections."),d(y,"class","collections-list"),d(V,"class","container")},m(e,s){m(document.head,r),m(document.head,t),m(document.head,a),m(document.head,c),u(e,f,s),u(e,p,s),m(p,V),D(b,V,null),m(V,T),m(V,y);for(let e=0;e<C.length;e+=1)C[e].m(y,null);m(V,A),N&&N.m(V,null),m(V,k);for(let e=0;e<S.length;e+=1)S[e].m(V,null);H=!0},p(e,[r]){if(1&r){let t;for(j=e[0],t=0;t<j.length;t+=1){const s=L(e,j,t);C[t]?C[t].p(s,r):(C[t]=U(s),C[t].c(),C[t].m(y,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=j.length}if(e[1].length>0?N?N.p(e,r):(N=x(e),N.c(),N.m(V,k)):N&&(N.d(1),N=null),1&r){let t;for(P=e[0],t=0;t<P.length;t+=1){const s=q(e,P,t);S[t]?S[t].p(s,r):(S[t]=G(s),S[t].c(),S[t].m(V,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=P.length}},i(e){H||(I(b.$$.fragment,e),H=!0)},o(e){M(b.$$.fragment,e),H=!1},d(e){h(r),h(t),h(a),h(c),e&&h(f),e&&h(p),w(b),v(C,e),N&&N.d(),v(S,e)}}}async function O({params:e,query:r}){let t=await this.fetch("collections-headers.json");if(200===t.status){t=await t.json();let e=T(t).map(e=>e.films).flatten().filter(e=>!e.isArchived&&e.isPick).orderBy(e=>e.order).map(e=>e.slug).value();return e=await Promise.all(T(e).map(async e=>{let r=await this.fetch(`film/${e}.json`);return r.status>=400?null:await r.json()}).value()),e=T.compact(e),{collectionsHeaders:t,pick:e}}this.error(res.status,data.message)}function z(e,r,t){y.locale("fr");let{collectionsHeaders:s}=r,{pick:a}=r;return e.$set=e=>{"collectionsHeaders"in e&&t(0,s=e.collectionsHeaders),"pick"in e&&t(1,a=e.pick)},[s,a]}export default class extends e{constructor(e){super(),r(this,e,z,J,t,{collectionsHeaders:0,pick:1})}}export{O as preload};
